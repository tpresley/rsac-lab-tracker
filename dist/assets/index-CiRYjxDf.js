(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();var ut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var G={},Xt={},Be;function Bn(){return Be||(Be=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}}(Xt)),Xt}var Zt,We;function Wn(){return We||(We=1,Zt=Bn()),Zt}var Qt,qe;function Rr(){if(qe)return Qt;qe=1;var e=Object.prototype.toString;return Qt=function(r){var n=e.call(r),o=n==="[object Arguments]";return o||(o=n!=="[object Array]"&&r!==null&&typeof r=="object"&&typeof r.length=="number"&&r.length>=0&&e.call(r.callee)==="[object Function]"),o},Qt}var te,Ge;function qn(){if(Ge)return te;Ge=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=Rr(),o=Object.prototype.propertyIsEnumerable,i=!o.call({toString:null},"toString"),a=o.call(function(){},"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(_){var y=_.constructor;return y&&y.prototype===_},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if(typeof window>"u")return!1;for(var _ in window)try{if(!f["$"+_]&&t.call(window,_)&&window[_]!==null&&typeof window[_]=="object")try{c(window[_])}catch{return!0}}catch{return!0}return!1}(),m=function(_){if(typeof window>"u"||!d)return c(_);try{return c(_)}catch{return!1}};e=function(y){var h=y!==null&&typeof y=="object",v=r.call(y)==="[object Function]",g=n(y),b=h&&r.call(y)==="[object String]",C=[];if(!h&&!v&&!g)throw new TypeError("Object.keys called on a non-object");var O=a&&v;if(b&&y.length>0&&!t.call(y,0))for(var w=0;w<y.length;++w)C.push(String(w));if(g&&y.length>0)for(var $=0;$<y.length;++$)C.push(String($));else for(var E in y)!(O&&E==="prototype")&&t.call(y,E)&&C.push(String(E));if(i)for(var x=m(y),N=0;N<u.length;++N)!(x&&u[N]==="constructor")&&t.call(y,u[N])&&C.push(u[N]);return C}}return te=e,te}var ee,Ue;function Gn(){if(Ue)return ee;Ue=1;var e=Array.prototype.slice,t=Rr(),r=Object.keys,n=r?function(a){return r(a)}:qn(),o=Object.keys;return n.shim=function(){if(Object.keys){var a=function(){var u=Object.keys(arguments);return u&&u.length===arguments.length}(1,2);a||(Object.keys=function(c){return t(c)?o(e.call(c)):o(c)})}else Object.keys=n;return Object.keys||n},ee=n,ee}var re,He;function Br(){if(He)return re;He=1;var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return re=e,re}var ne,ze;function Un(){return ze||(ze=1,ne=SyntaxError),ne}var oe,Ve;function Hn(){return Ve||(Ve=1,oe=TypeError),oe}var ie,Ke;function zn(){return Ke||(Ke=1,ie=Object.getOwnPropertyDescriptor),ie}var se,Ye;function Wr(){if(Ye)return se;Ye=1;var e=zn();if(e)try{e([],"length")}catch{e=null}return se=e,se}var ae,Je;function Vn(){if(Je)return ae;Je=1;var e=Br(),t=Un(),r=Hn(),n=Wr();return ae=function(i,a,u){if(!i||typeof i!="object"&&typeof i!="function")throw new r("`obj` must be an object or a function`");if(typeof a!="string"&&typeof a!="symbol")throw new r("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new r("`loose`, if provided, must be a boolean");var c=arguments.length>3?arguments[3]:null,f=arguments.length>4?arguments[4]:null,d=arguments.length>5?arguments[5]:null,m=arguments.length>6?arguments[6]:!1,_=!!n&&n(i,a);if(e)e(i,a,{configurable:d===null&&_?_.configurable:!d,enumerable:c===null&&_?_.enumerable:!c,value:u,writable:f===null&&_?_.writable:!f});else if(m||!c&&!f&&!d)i[a]=u;else throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},ae}var ue,Xe;function Kn(){if(Xe)return ue;Xe=1;var e=Br(),t=function(){return!!e};return t.hasArrayLengthDefineBug=function(){if(!e)return null;try{return e([],"length",{value:1}).length!==1}catch{return!0}},ue=t,ue}var ce,Ze;function qr(){if(Ze)return ce;Ze=1;var e=Gn(),t=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",r=Object.prototype.toString,n=Array.prototype.concat,o=Vn(),i=function(f){return typeof f=="function"&&r.call(f)==="[object Function]"},a=Kn()(),u=function(f,d,m,_){if(d in f){if(_===!0){if(f[d]===m)return}else if(!i(_)||!_())return}a?o(f,d,m,!0):o(f,d,m)},c=function(f,d){var m=arguments.length>2?arguments[2]:{},_=e(d);t&&(_=n.call(_,Object.getOwnPropertySymbols(d)));for(var y=0;y<_.length;y+=1)u(f,_[y],d[_[y]],m[_[y]])};return c.supportsDescriptors=!!a,ce=c,ce}var wt={exports:{}},Qe;function Gr(){return Qe||(Qe=1,typeof self<"u"?wt.exports=self:typeof window<"u"?wt.exports=window:wt.exports=Function("return this")()),wt.exports}var fe,tr;function Ur(){if(tr)return fe;tr=1;var e=Gr();return fe=function(){return typeof ut!="object"||!ut||ut.Math!==Math||ut.Array!==Array?e:ut},fe}var le,er;function Yn(){if(er)return le;er=1;var e=qr(),t=Wr(),r=Ur();return le=function(){var o=r();if(e.supportsDescriptors){var i=t(o,"globalThis");(!i||i.configurable&&(i.enumerable||!i.writable||globalThis!==o))&&Object.defineProperty(o,"globalThis",{configurable:!0,enumerable:!1,value:o,writable:!0})}else(typeof globalThis!="object"||globalThis!==o)&&(o.globalThis=o);return o},le}var pe,rr;function Jn(){if(rr)return pe;rr=1;var e=qr(),t=Gr(),r=Ur(),n=Yn(),o=r(),i=function(){return o};return e(i,{getPolyfill:r,implementation:t,shim:n}),pe=i,pe}var nr;function Vt(){if(nr)return G;nr=1;var e=G&&G.__extends||function(){var l=function(s,p){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,I){S.__proto__=I}||function(S,I){for(var j in I)I.hasOwnProperty(j)&&(S[j]=I[j])},l(s,p)};return function(s,p){l(s,p);function S(){this.constructor=s}s.prototype=p===null?Object.create(p):(S.prototype=p.prototype,new S)}}();Object.defineProperty(G,"__esModule",{value:!0}),G.NO_IL=G.NO=G.MemoryStream=G.Stream=void 0;var t=Wn(),r=Jn(),n=t.default(r.getPolyfill()),o={};G.NO=o;function i(){}function a(l){for(var s=l.length,p=Array(s),S=0;S<s;++S)p[S]=l[S];return p}function u(l,s){return function(S){return l(S)&&s(S)}}function c(l,s,p){try{return l.f(s)}catch(S){return p._e(S),o}}var f={_n:i,_e:i,_c:i};G.NO_IL=f;function d(l){l._start=function(p){p.next=p._n,p.error=p._e,p.complete=p._c,this.start(p)},l._stop=l.stop}var m=function(){function l(s,p){this._stream=s,this._listener=p}return l.prototype.unsubscribe=function(){this._stream._remove(this._listener)},l}(),_=function(){function l(s){this._listener=s}return l.prototype.next=function(s){this._listener._n(s)},l.prototype.error=function(s){this._listener._e(s)},l.prototype.complete=function(){this._listener._c()},l}(),y=function(){function l(s){this.type="fromObservable",this.ins=s,this.active=!1}return l.prototype._start=function(s){this.out=s,this.active=!0,this._sub=this.ins.subscribe(new _(s)),this.active||this._sub.unsubscribe()},l.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},l}(),h=function(){function l(s){this.type="merge",this.insArr=s,this.out=o,this.ac=0}return l.prototype._start=function(s){this.out=s;var p=this.insArr,S=p.length;this.ac=S;for(var I=0;I<S;I++)p[I]._add(this)},l.prototype._stop=function(){for(var s=this.insArr,p=s.length,S=0;S<p;S++)s[S]._remove(this);this.out=o},l.prototype._n=function(s){var p=this.out;p!==o&&p._n(s)},l.prototype._e=function(s){var p=this.out;p!==o&&p._e(s)},l.prototype._c=function(){if(--this.ac<=0){var s=this.out;if(s===o)return;s._c()}},l}(),v=function(){function l(s,p,S){this.i=s,this.out=p,this.p=S,S.ils.push(this)}return l.prototype._n=function(s){var p=this.p,S=this.out;if(S!==o&&p.up(s,this.i)){var I=a(p.vals);S._n(I)}},l.prototype._e=function(s){var p=this.out;p!==o&&p._e(s)},l.prototype._c=function(){var s=this.p;s.out!==o&&--s.Nc===0&&s.out._c()},l}(),g=function(){function l(s){this.type="combine",this.insArr=s,this.out=o,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return l.prototype.up=function(s,p){var S=this.vals[p],I=this.Nn?S===o?--this.Nn:this.Nn:0;return this.vals[p]=s,I===0},l.prototype._start=function(s){this.out=s;var p=this.insArr,S=this.Nc=this.Nn=p.length,I=this.vals=new Array(S);if(S===0)s._n([]),s._c();else for(var j=0;j<S;j++)I[j]=o,p[j]._add(new v(j,s,this))},l.prototype._stop=function(){for(var s=this.insArr,p=s.length,S=this.ils,I=0;I<p;I++)s[I]._remove(S[I]);this.out=o,this.ils=[],this.vals=[]},l}(),b=function(){function l(s){this.type="fromArray",this.a=s}return l.prototype._start=function(s){for(var p=this.a,S=0,I=p.length;S<I;S++)s._n(p[S]);s._c()},l.prototype._stop=function(){},l}(),C=function(){function l(s){this.type="fromPromise",this.on=!1,this.p=s}return l.prototype._start=function(s){var p=this;this.on=!0,this.p.then(function(S){p.on&&(s._n(S),s._c())},function(S){s._e(S)}).then(i,function(S){setTimeout(function(){throw S})})},l.prototype._stop=function(){this.on=!1},l}(),O=function(){function l(s){this.type="periodic",this.period=s,this.intervalID=-1,this.i=0}return l.prototype._start=function(s){var p=this;function S(){s._n(p.i++)}this.intervalID=setInterval(S,this.period)},l.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},l}(),w=function(){function l(s,p){this.type="debug",this.ins=s,this.out=o,this.s=i,this.l="",typeof p=="string"?this.l=p:typeof p=="function"&&(this.s=p)}return l.prototype._start=function(s){this.out=s,this.ins._add(this)},l.prototype._stop=function(){this.ins._remove(this),this.out=o},l.prototype._n=function(s){var p=this.out;if(p!==o){var S=this.s,I=this.l;if(S!==i)try{S(s)}catch(j){p._e(j)}else I?console.log(I+":",s):console.log(s);p._n(s)}},l.prototype._e=function(s){var p=this.out;p!==o&&p._e(s)},l.prototype._c=function(){var s=this.out;s!==o&&s._c()},l}(),$=function(){function l(s,p){this.type="drop",this.ins=p,this.out=o,this.max=s,this.dropped=0}return l.prototype._start=function(s){this.out=s,this.dropped=0,this.ins._add(this)},l.prototype._stop=function(){this.ins._remove(this),this.out=o},l.prototype._n=function(s){var p=this.out;p!==o&&this.dropped++>=this.max&&p._n(s)},l.prototype._e=function(s){var p=this.out;p!==o&&p._e(s)},l.prototype._c=function(){var s=this.out;s!==o&&s._c()},l}(),E=function(){function l(s,p){this.out=s,this.op=p}return l.prototype._n=function(){this.op.end()},l.prototype._e=function(s){this.out._e(s)},l.prototype._c=function(){this.op.end()},l}(),x=function(){function l(s,p){this.type="endWhen",this.ins=p,this.out=o,this.o=s,this.oil=f}return l.prototype._start=function(s){this.out=s,this.o._add(this.oil=new E(s,this)),this.ins._add(this)},l.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=o,this.oil=f},l.prototype.end=function(){var s=this.out;s!==o&&s._c()},l.prototype._n=function(s){var p=this.out;p!==o&&p._n(s)},l.prototype._e=function(s){var p=this.out;p!==o&&p._e(s)},l.prototype._c=function(){this.end()},l}(),N=function(){function l(s,p){this.type="filter",this.ins=p,this.out=o,this.f=s}return l.prototype._start=function(s){this.out=s,this.ins._add(this)},l.prototype._stop=function(){this.ins._remove(this),this.out=o},l.prototype._n=function(s){var p=this.out;if(p!==o){var S=c(this,s,p);S===o||!S||p._n(s)}},l.prototype._e=function(s){var p=this.out;p!==o&&p._e(s)},l.prototype._c=function(){var s=this.out;s!==o&&s._c()},l}(),D=function(){function l(s,p){this.out=s,this.op=p}return l.prototype._n=function(s){this.out._n(s)},l.prototype._e=function(s){this.out._e(s)},l.prototype._c=function(){this.op.inner=o,this.op.less()},l}(),T=function(){function l(s){this.type="flatten",this.ins=s,this.out=o,this.open=!0,this.inner=o,this.il=f}return l.prototype._start=function(s){this.out=s,this.open=!0,this.inner=o,this.il=f,this.ins._add(this)},l.prototype._stop=function(){this.ins._remove(this),this.inner!==o&&this.inner._remove(this.il),this.out=o,this.open=!0,this.inner=o,this.il=f},l.prototype.less=function(){var s=this.out;s!==o&&!this.open&&this.inner===o&&s._c()},l.prototype._n=function(s){var p=this.out;if(p!==o){var S=this,I=S.inner,j=S.il;I!==o&&j!==f&&I._remove(j),(this.inner=s)._add(this.il=new D(p,this))}},l.prototype._e=function(s){var p=this.out;p!==o&&p._e(s)},l.prototype._c=function(){this.open=!1,this.less()},l}(),M=function(){function l(s,p,S){var I=this;this.type="fold",this.ins=S,this.out=o,this.f=function(j){return s(I.acc,j)},this.acc=this.seed=p}return l.prototype._start=function(s){this.out=s,this.acc=this.seed,s._n(this.acc),this.ins._add(this)},l.prototype._stop=function(){this.ins._remove(this),this.out=o,this.acc=this.seed},l.prototype._n=function(s){var p=this.out;if(p!==o){var S=c(this,s,p);S!==o&&p._n(this.acc=S)}},l.prototype._e=function(s){var p=this.out;p!==o&&p._e(s)},l.prototype._c=function(){var s=this.out;s!==o&&s._c()},l}(),F=function(){function l(s){this.type="last",this.ins=s,this.out=o,this.has=!1,this.val=o}return l.prototype._start=function(s){this.out=s,this.has=!1,this.ins._add(this)},l.prototype._stop=function(){this.ins._remove(this),this.out=o,this.val=o},l.prototype._n=function(s){this.has=!0,this.val=s},l.prototype._e=function(s){var p=this.out;p!==o&&p._e(s)},l.prototype._c=function(){var s=this.out;s!==o&&(this.has?(s._n(this.val),s._c()):s._e(new Error("last() failed because input stream completed")))},l}(),R=function(){function l(s,p){this.type="map",this.ins=p,this.out=o,this.f=s}return l.prototype._start=function(s){this.out=s,this.ins._add(this)},l.prototype._stop=function(){this.ins._remove(this),this.out=o},l.prototype._n=function(s){var p=this.out;if(p!==o){var S=c(this,s,p);S!==o&&p._n(S)}},l.prototype._e=function(s){var p=this.out;p!==o&&p._e(s)},l.prototype._c=function(){var s=this.out;s!==o&&s._c()},l}(),K=function(){function l(s){this.type="remember",this.ins=s,this.out=o}return l.prototype._start=function(s){this.out=s,this.ins._add(s)},l.prototype._stop=function(){this.ins._remove(this.out),this.out=o},l}(),tt=function(){function l(s,p){this.type="replaceError",this.ins=p,this.out=o,this.f=s}return l.prototype._start=function(s){this.out=s,this.ins._add(this)},l.prototype._stop=function(){this.ins._remove(this),this.out=o},l.prototype._n=function(s){var p=this.out;p!==o&&p._n(s)},l.prototype._e=function(s){var p=this.out;if(p!==o)try{this.ins._remove(this),(this.ins=this.f(s))._add(this)}catch(S){p._e(S)}},l.prototype._c=function(){var s=this.out;s!==o&&s._c()},l}(),bt=function(){function l(s,p){this.type="startWith",this.ins=s,this.out=o,this.val=p}return l.prototype._start=function(s){this.out=s,this.out._n(this.val),this.ins._add(s)},l.prototype._stop=function(){this.ins._remove(this.out),this.out=o},l}(),Re=function(){function l(s,p){this.type="take",this.ins=p,this.out=o,this.max=s,this.taken=0}return l.prototype._start=function(s){this.out=s,this.taken=0,this.max<=0?s._c():this.ins._add(this)},l.prototype._stop=function(){this.ins._remove(this),this.out=o},l.prototype._n=function(s){var p=this.out;if(p!==o){var S=++this.taken;S<this.max?p._n(s):S===this.max&&(p._n(s),p._c())}},l.prototype._e=function(s){var p=this.out;p!==o&&p._e(s)},l.prototype._c=function(){var s=this.out;s!==o&&s._c()},l}(),Jt=function(){function l(s){this._prod=s||o,this._ils=[],this._stopID=o,this._dl=o,this._d=!1,this._target=null,this._err=o}return l.prototype._n=function(s){var p=this._ils,S=p.length;if(this._d&&this._dl._n(s),S==1)p[0]._n(s);else{if(S==0)return;for(var I=a(p),j=0;j<S;j++)I[j]._n(s)}},l.prototype._e=function(s){if(this._err===o){this._err=s;var p=this._ils,S=p.length;if(this._x(),this._d&&this._dl._e(s),S==1)p[0]._e(s);else{if(S==0)return;for(var I=a(p),j=0;j<S;j++)I[j]._e(s)}if(!this._d&&S==0)throw this._err}},l.prototype._c=function(){var s=this._ils,p=s.length;if(this._x(),this._d&&this._dl._c(),p==1)s[0]._c();else{if(p==0)return;for(var S=a(s),I=0;I<p;I++)S[I]._c()}},l.prototype._x=function(){this._ils.length!==0&&(this._prod!==o&&this._prod._stop(),this._err=o,this._ils=[])},l.prototype._stopNow=function(){this._prod._stop(),this._err=o,this._stopID=o},l.prototype._add=function(s){var p=this._target;if(p)return p._add(s);var S=this._ils;if(S.push(s),!(S.length>1))if(this._stopID!==o)clearTimeout(this._stopID),this._stopID=o;else{var I=this._prod;I!==o&&I._start(this)}},l.prototype._remove=function(s){var p=this,S=this._target;if(S)return S._remove(s);var I=this._ils,j=I.indexOf(s);j>-1&&(I.splice(j,1),this._prod!==o&&I.length<=0?(this._err=o,this._stopID=setTimeout(function(){return p._stopNow()})):I.length===1&&this._pruneCycles())},l.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},l.prototype._hasNoSinks=function(s,p){if(p.indexOf(s)!==-1)return!0;if(s.out===this)return!0;if(s.out&&s.out!==o)return this._hasNoSinks(s.out,p.concat(s));if(s._ils){for(var S=0,I=s._ils.length;S<I;S++)if(!this._hasNoSinks(s._ils[S],p.concat(s)))return!1;return!0}else return!1},l.prototype.ctor=function(){return this instanceof et?et:l},l.prototype.addListener=function(s){s._n=s.next||i,s._e=s.error||i,s._c=s.complete||i,this._add(s)},l.prototype.removeListener=function(s){this._remove(s)},l.prototype.subscribe=function(s){return this.addListener(s),new m(this,s)},l.prototype[n]=function(){return this},l.create=function(s){if(s){if(typeof s.start!="function"||typeof s.stop!="function")throw new Error("producer requires both start and stop functions");d(s)}return new l(s)},l.createWithMemory=function(s){return s&&d(s),new et(s)},l.never=function(){return new l({_start:i,_stop:i})},l.empty=function(){return new l({_start:function(s){s._c()},_stop:i})},l.throw=function(s){return new l({_start:function(p){p._e(s)},_stop:i})},l.from=function(s){if(typeof s[n]=="function")return l.fromObservable(s);if(typeof s.then=="function")return l.fromPromise(s);if(Array.isArray(s))return l.fromArray(s);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},l.of=function(){for(var s=[],p=0;p<arguments.length;p++)s[p]=arguments[p];return l.fromArray(s)},l.fromArray=function(s){return new l(new b(s))},l.fromPromise=function(s){return new l(new C(s))},l.fromObservable=function(s){if(s.endWhen!==void 0)return s;var p=typeof s[n]=="function"?s[n]():s;return new l(new y(p))},l.periodic=function(s){return new l(new O(s))},l.prototype._map=function(s){return new(this.ctor())(new R(s,this))},l.prototype.map=function(s){return this._map(s)},l.prototype.mapTo=function(s){var p=this.map(function(){return s}),S=p._prod;return S.type="mapTo",p},l.prototype.filter=function(s){var p=this._prod;return p instanceof N?new l(new N(u(p.f,s),p.ins)):new l(new N(s,this))},l.prototype.take=function(s){return new(this.ctor())(new Re(s,this))},l.prototype.drop=function(s){return new l(new $(s,this))},l.prototype.last=function(){return new l(new F(this))},l.prototype.startWith=function(s){return new et(new bt(this,s))},l.prototype.endWhen=function(s){return new(this.ctor())(new x(s,this))},l.prototype.fold=function(s,p){return new et(new M(s,p,this))},l.prototype.replaceError=function(s){return new(this.ctor())(new tt(s,this))},l.prototype.flatten=function(){return new l(new T(this))},l.prototype.compose=function(s){return s(this)},l.prototype.remember=function(){return new et(new K(this))},l.prototype.debug=function(s){return new(this.ctor())(new w(this,s))},l.prototype.imitate=function(s){if(s instanceof et)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=s;for(var p=this._ils,S=p.length,I=0;I<S;I++)s._add(p[I]);this._ils=[]},l.prototype.shamefullySendNext=function(s){this._n(s)},l.prototype.shamefullySendError=function(s){this._e(s)},l.prototype.shamefullySendComplete=function(){this._c()},l.prototype.setDebugListener=function(s){s?(this._d=!0,s._n=s.next||i,s._e=s.error||i,s._c=s.complete||i,this._dl=s):(this._d=!1,this._dl=o)},l.merge=function(){for(var p=[],S=0;S<arguments.length;S++)p[S]=arguments[S];return new l(new h(p))},l.combine=function(){for(var p=[],S=0;S<arguments.length;S++)p[S]=arguments[S];return new l(new g(p))},l}();G.Stream=Jt;var et=function(l){e(s,l);function s(p){var S=l.call(this,p)||this;return S._has=!1,S}return s.prototype._n=function(p){this._v=p,this._has=!0,l.prototype._n.call(this,p)},s.prototype._add=function(p){var S=this._target;if(S)return S._add(p);var I=this._ils;if(I.push(p),I.length>1){this._has&&p._n(this._v);return}if(this._stopID!==o)this._has&&p._n(this._v),clearTimeout(this._stopID),this._stopID=o;else if(this._has)p._n(this._v);else{var j=this._prod;j!==o&&j._start(this)}},s.prototype._stopNow=function(){this._has=!1,l.prototype._stopNow.call(this)},s.prototype._x=function(){this._has=!1,l.prototype._x.call(this)},s.prototype.map=function(p){return this._map(p)},s.prototype.mapTo=function(p){return l.prototype.mapTo.call(this,p)},s.prototype.take=function(p){return l.prototype.take.call(this,p)},s.prototype.endWhen=function(p){return l.prototype.endWhen.call(this,p)},s.prototype.replaceError=function(p){return l.prototype.replaceError.call(this,p)},s.prototype.remember=function(){return this},s.prototype.debug=function(p){return l.prototype.debug.call(this,p)},s}(Jt);G.MemoryStream=et;var Rn=Jt;return G.default=Rn,G}var V=Vt();const P=gt(V);var St={},or;function Xn(){if(or)return St;or=1,Object.defineProperty(St,"__esModule",{value:!0});function e(){var n;return typeof window<"u"?n=window:typeof ut<"u"?n=ut:n=this,n.Cyclejs=n.Cyclejs||{},n=n.Cyclejs,n.adaptStream=n.adaptStream||function(o){return o},n}function t(n){e().adaptStream=n}St.setAdapt=t;function r(n){return e().adaptStream(n)}return St.adapt=r,St}var H=Xn();function Zn(e,t){if(typeof e!="function")throw new Error("First argument given to isolate() must be a 'dataflowComponent' function");if(t===null)throw new Error("Second argument given to isolate() must not be null")}function Qn(e,t,r){var n={};return Object.keys(e).forEach(function(o){if(typeof t=="string"){n[o]=t;return}var i=t[o];if(typeof i<"u"){n[o]=i;return}var a=t["*"];if(typeof a<"u"){n[o]=a;return}n[o]=r}),n}function to(e,t){var r={};for(var n in e){var o=e[n];e.hasOwnProperty(n)&&o&&t[n]!==null&&typeof o.isolateSource=="function"?r[n]=o.isolateSource(o,t[n]):e.hasOwnProperty(n)&&(r[n]=e[n])}return r}function eo(e,t,r){var n={};for(var o in t){var i=e[o],a=t[o];t.hasOwnProperty(o)&&i&&r[o]!==null&&typeof i.isolateSink=="function"?n[o]=H.adapt(i.isolateSink(P.fromObservable(a),r[o])):t.hasOwnProperty(o)&&(n[o]=t[o])}return n}var Hr=0;function ir(){return"cycle"+ ++Hr}function it(e,t){t===void 0&&(t=ir()),Zn(e,t);var r=typeof t=="object"?ir():"",n=typeof t=="string"||typeof t=="object"?t:t.toString();return function(i){for(var a=[],u=1;u<arguments.length;u++)a[u-1]=arguments[u];var c=Qn(i,n,r),f=to(i,c),d=e.apply(void 0,[f].concat(a)),m=eo(i,d,c);return m}}it.reset=function(){return Hr=0};var ht={},sr;function ro(){if(sr)return ht;sr=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.DropRepeatsOperator=void 0;var e=Vt(),t={},r=function(){function o(i,a){this.ins=i,this.type="dropRepeats",this.out=null,this.v=t,this.isEq=a||function(u,c){return u===c}}return o.prototype._start=function(i){this.out=i,this.ins._add(this)},o.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=t},o.prototype._n=function(i){var a=this.out;if(a){var u=this.v;u!==t&&this.isEq(i,u)||(this.v=i,a._n(i))}},o.prototype._e=function(i){var a=this.out;a&&a._e(i)},o.prototype._c=function(){var i=this.out;i&&i._c()},o}();ht.DropRepeatsOperator=r;function n(o){return o===void 0&&(o=void 0),function(a){return new e.Stream(new r(a,o))}}return ht.default=n,ht}var no=ro();const oo=gt(no);var $e=function(){return $e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},$e.apply(this,arguments)};function io(e,t,r){if(r===e[t])return e;var n=parseInt(t);return typeof r>"u"?e.filter(function(o,i){return i!==n}):e.map(function(o,i){return i===n?r:o})}function zr(e){return typeof e=="string"||typeof e=="number"?function(r){if(!(typeof r>"u"))return r[e]}:e.get}function so(e){return typeof e=="string"||typeof e=="number"?function(r,n){var o,i;return Array.isArray(r)?io(r,e,n):typeof r>"u"?(o={},o[e]=n,o):$e({},r,(i={},i[e]=n,i))}:e.set}function ao(e,t){return e.select(t)}function uo(e,t){var r=zr(t),n=so(t);return e.map(function(o){return function(a){var u=r(a),c=o(u);return u===c?a:n(a,c)}})}var $t=function(){function e(t,r){this.isolateSource=ao,this.isolateSink=uo,this._stream=t.filter(function(n){return typeof n<"u"}).compose(oo()).remember(),this._name=r,this.stream=H.adapt(this._stream),this._stream._isCycleSource=r}return e.prototype.select=function(t){var r=zr(t);return new e(this._stream.map(r),this._name)},e}(),co=function(){function e(t,r,n){this.ins=n,this.out=t,this.p=r}return e.prototype._n=function(t){this.p;var r=this.out;r!==null&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),fo=function(){function e(t,r){this.type="pickMerge",this.ins=r,this.out=null,this.sel=t,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r,n){r.ins._remove(r),r.ins=null,r.out=null,t.delete(n)}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype._n=function(t){this.inst=t;for(var r=t.arr,n=this.ils,o=this.out,i=this.sel,a=r.length,u=0;u<a;++u){var c=r[u],f=c._key,d=P.fromObservable(c[i]||P.never());n.has(f)||(n.set(f,new co(o,this,d)),d._add(n.get(f)))}n.forEach(function(m,_){(!t.dict.has(_)||!t.dict.get(_))&&(m.ins._remove(m),m.ins=null,m.out=null,n.delete(_))})},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function lo(e){return function(r){return new V.Stream(new fo(e,r))}}var po=function(){function e(t,r,n,o){this.key=t,this.out=r,this.p=n,this.val=V.NO,this.ins=o}return e.prototype._n=function(t){this.p;var r=this.out;this.val=t,r!==null&&this.p.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){},e}(),ho=function(){function e(t,r){this.type="combine",this.ins=r,this.sel=t,this.out=null,this.ils=new Map,this.inst=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this);var t=this.ils;t.forEach(function(r){r.ins._remove(r),r.ins=null,r.out=null,r.val=null}),t.clear(),this.out=null,this.ils=new Map,this.inst=null},e.prototype.up=function(){for(var t=this.inst.arr,r=t.length,n=this.ils,o=Array(r),i=0;i<r;++i){var a=t[i],u=a._key;if(!n.has(u))return;var c=n.get(u).val;if(c===V.NO)return;o[i]=c}this.out._n(o)},e.prototype._n=function(t){this.inst=t;var r=t.arr,n=this.ils,o=this.out,i=this.sel,a=t.dict,u=r.length,c=!1;if(n.forEach(function(y,h){a.has(h)||(y.ins._remove(y),y.ins=null,y.out=null,y.val=null,n.delete(h),c=!0)}),u===0){o._n([]);return}for(var f=0;f<u;++f){var d=r[f],m=d._key;if(!d[i])throw new Error("pickCombine found an undefined child sink stream");var _=P.fromObservable(d[i]);n.has(m)||(n.set(m,new po(m,o,this,_)),_._add(n.get(m)))}c&&this.up()},e.prototype._e=function(t){var r=this.out;r!==null&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==null&&t._c()},e}();function yo(e){return function(r){return new V.Stream(new ho(e,r))}}var Bt=function(){return Bt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Bt.apply(this,arguments)},mo=function(){function e(t){this._instances$=t}return e.prototype.pickMerge=function(t){return H.adapt(this._instances$.compose(lo(t)))},e.prototype.pickCombine=function(t){return H.adapt(this._instances$.compose(yo(t)))},e}();function vo(e){return{"*":null}}function _o(e,t){return{get:function(r){if(!(typeof r>"u")){for(var n=0,o=r.length;n<o;++n)if(""+e(r[n],n)===t)return r[n];return}},set:function(r,n){return typeof r>"u"?[n]:typeof n>"u"?r.filter(function(o,i){return""+e(o,i)!==t}):r.map(function(o,i){return""+e(o,i)===t?n:o})}}}var go={get:function(e){return e},set:function(e,t){return t}};function bo(e){return function(r){var n=e.channel||"state",o=e.itemKey,i=e.itemScope||vo,a=P.fromObservable(r[n].stream),u=a.fold(function(c,f){var d,m,_,y,h=c.dict;if(Array.isArray(f)){for(var v=Array(f.length),g=new Set,b=0,C=f.length;b<C;++b){var O=""+(o?o(f[b],b):b);if(g.add(O),h.has(O))v[b]=h.get(O);else{var w=o?_o(o,O):""+b,$=i(O),E=typeof $=="string"?(d={"*":$},d[n]=w,d):Bt({},$,(m={},m[n]=w,m)),x=e.itemFactory?e.itemFactory(f[b],b):e.item,N=it(x,E)(r);h.set(O,N),v[b]=N}v[b]._key=O}return h.forEach(function(D,T){g.has(T)||h.delete(T)}),g.clear(),{dict:h,arr:v}}else{h.clear();var O=""+(o?o(f,0):"this"),w=go,$=i(O),E=typeof $=="string"?(_={"*":$},_[n]=w,_):Bt({},$,(y={},y[n]=w,y)),x=e.itemFactory?e.itemFactory(f,0):e.item,N=it(x,E)(r);return h.set(O,N),{dict:h,arr:[N]}}},{dict:new Map,arr:[]});return e.collectSinks(new mo(u))}}var xt={},ar;function wo(){if(ar)return xt;ar=1,Object.defineProperty(xt,"__esModule",{value:!0});var e=Vt(),t=function(){function n(o){this.streams=o,this.type="concat",this.out=null,this.i=0}return n.prototype._start=function(o){this.out=o,this.streams[this.i]._add(this)},n.prototype._stop=function(){var o=this.streams;this.i<o.length&&o[this.i]._remove(this),this.i=0,this.out=null},n.prototype._n=function(o){var i=this.out;i&&i._n(o)},n.prototype._e=function(o){var i=this.out;i&&i._e(o)},n.prototype._c=function(){var o=this.out;if(o){var i=this.streams;i[this.i]._remove(this),++this.i<i.length?i[this.i]._add(this):o._c()}},n}();function r(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return new e.Stream(new t(n))}return xt.default=r,xt}var So=wo();const Vr=gt(So);var It={},ur;function Oo(){if(ur)return It;ur=1,Object.defineProperty(It,"__esModule",{value:!0});function e(){return typeof queueMicrotask<"u"?queueMicrotask:typeof setImmediate<"u"?setImmediate:typeof process<"u"?process.nextTick:setTimeout}return It.default=e,It}var Ao=Oo();const Kr=gt(Ao);var he=Kr();function $o(e,t){return function(n){var o=P.create(),i=o.fold(function(f,d){return d(f)},void 0).drop(1),a=n;a[t]=new $t(i,t);var u=e(a);if(u[t]){var c=Vr(P.fromObservable(u[t]),P.never());c.subscribe({next:function(f){return he(function(){return o._n(f)})},error:function(f){return he(function(){return o._e(f)})},complete:function(){return he(function(){return o._c()})}})}return u}}function Co(e,t){return document.createElement(e,t)}function Eo(e,t,r){return document.createElementNS(e,t,r)}function No(){return ft(document.createDocumentFragment())}function Po(e){return document.createTextNode(e)}function xo(e){return document.createComment(e)}function Io(e,t,r){if(Q(e)){let n=e;for(;n&&Q(n);)n=ft(n).parent;e=n??e}Q(t)&&(t=ft(t,e)),r&&Q(r)&&(r=ft(r).firstChildNode),e.insertBefore(t,r)}function Do(e,t){e.removeChild(t)}function ko(e,t){Q(t)&&(t=ft(t,e)),e.appendChild(t)}function Yr(e){if(Q(e)){for(;e&&Q(e);)e=ft(e).parent;return e??null}return e.parentNode}function To(e){var t;if(Q(e)){const r=ft(e),n=Yr(r);if(n&&r.lastChildNode){const o=Array.from(n.childNodes),i=o.indexOf(r.lastChildNode);return(t=o[i+1])!==null&&t!==void 0?t:null}return null}return e.nextSibling}function Mo(e){return e.tagName}function Lo(e,t){e.textContent=t}function jo(e){return e.textContent}function Fo(e){return e.nodeType===1}function Ro(e){return e.nodeType===3}function Bo(e){return e.nodeType===8}function Q(e){return e.nodeType===11}function ft(e,t){var r,n,o;const i=e;return(r=i.parent)!==null&&r!==void 0||(i.parent=t??null),(n=i.firstChildNode)!==null&&n!==void 0||(i.firstChildNode=e.firstChild),(o=i.lastChildNode)!==null&&o!==void 0||(i.lastChildNode=e.lastChild),i}const Jr={createElement:Co,createElementNS:Eo,createTextNode:Po,createDocumentFragment:No,createComment:xo,insertBefore:Io,removeChild:Do,appendChild:ko,parentNode:Yr,nextSibling:To,tagName:Mo,setTextContent:Lo,getTextContent:jo,isElement:Fo,isText:Ro,isComment:Bo,isDocumentFragment:Q};function Z(e,t,r,n,o){const i=t===void 0?void 0:t.key;return{sel:e,data:t,children:r,text:n,elm:o,key:i}}const Wt=Array.isArray;function Mt(e){return typeof e=="string"||typeof e=="number"||e instanceof String||e instanceof Number}function Dt(e){return e===void 0}function U(e){return e!==void 0}const de=Z("",{},[],void 0,void 0);function Ot(e,t){var r,n;const o=e.key===t.key,i=((r=e.data)===null||r===void 0?void 0:r.is)===((n=t.data)===null||n===void 0?void 0:n.is),a=e.sel===t.sel,u=!e.sel&&e.sel===t.sel?typeof e.text==typeof t.text:!0;return a&&o&&i&&u}function Wo(){throw new Error("The document fragment is not supported on this platform.")}function qo(e,t){return e.isElement(t)}function Go(e,t){return e.isDocumentFragment(t)}function Uo(e,t,r){var n;const o={};for(let i=t;i<=r;++i){const a=(n=e[i])===null||n===void 0?void 0:n.key;a!==void 0&&(o[a]=i)}return o}const Ho=["create","update","remove","destroy","pre","post"];function zo(e,t,r){const n={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},o=Jr;for(const h of Ho)for(const v of e){const g=v[h];g!==void 0&&n[h].push(g)}function i(h){const v=h.id?"#"+h.id:"",g=h.getAttribute("class"),b=g?"."+g.split(" ").join("."):"";return Z(o.tagName(h).toLowerCase()+v+b,{},[],void 0,h)}function a(h){return Z(void 0,{},[],void 0,h)}function u(h,v){return function(){if(--v===0){const b=o.parentNode(h);b!==null&&o.removeChild(b,h)}}}function c(h,v){var g,b,C,O;let w,$=h.data;if($!==void 0){const N=(g=$.hook)===null||g===void 0?void 0:g.init;U(N)&&(N(h),$=h.data)}const E=h.children,x=h.sel;if(x==="!")Dt(h.text)&&(h.text=""),h.elm=o.createComment(h.text);else if(x==="")h.elm=o.createTextNode(h.text);else if(x!==void 0){const N=x.indexOf("#"),D=x.indexOf(".",N),T=N>0?N:x.length,M=D>0?D:x.length,F=N!==-1||D!==-1?x.slice(0,Math.min(T,M)):x,R=h.elm=U($)&&U(w=$.ns)?o.createElementNS(w,F,$):o.createElement(F,$);for(T<M&&R.setAttribute("id",x.slice(T+1,M)),D>0&&R.setAttribute("class",x.slice(M+1).replace(/\./g," ")),w=0;w<n.create.length;++w)n.create[w](de,h);if(Mt(h.text)&&(!Wt(E)||E.length===0)&&o.appendChild(R,o.createTextNode(h.text)),Wt(E))for(w=0;w<E.length;++w){const tt=E[w];tt!=null&&o.appendChild(R,c(tt,v))}const K=h.data.hook;U(K)&&((b=K.create)===null||b===void 0||b.call(K,de,h),K.insert&&v.push(h))}else if(!((C=r==null?void 0:r.experimental)===null||C===void 0)&&C.fragments&&h.children){for(h.elm=((O=o.createDocumentFragment)!==null&&O!==void 0?O:Wo)(),w=0;w<n.create.length;++w)n.create[w](de,h);for(w=0;w<h.children.length;++w){const N=h.children[w];N!=null&&o.appendChild(h.elm,c(N,v))}}else h.elm=o.createTextNode(h.text);return h.elm}function f(h,v,g,b,C,O){for(;b<=C;++b){const w=g[b];w!=null&&o.insertBefore(h,c(w,O),v)}}function d(h){var v,g;const b=h.data;if(b!==void 0){(g=(v=b==null?void 0:b.hook)===null||v===void 0?void 0:v.destroy)===null||g===void 0||g.call(v,h);for(let C=0;C<n.destroy.length;++C)n.destroy[C](h);if(h.children!==void 0)for(let C=0;C<h.children.length;++C){const O=h.children[C];O!=null&&typeof O!="string"&&d(O)}}}function m(h,v,g,b){for(var C,O;g<=b;++g){let w,$;const E=v[g];if(E!=null)if(U(E.sel)){d(E),w=n.remove.length+1,$=u(E.elm,w);for(let N=0;N<n.remove.length;++N)n.remove[N](E,$);const x=(O=(C=E==null?void 0:E.data)===null||C===void 0?void 0:C.hook)===null||O===void 0?void 0:O.remove;U(x)?x(E,$):$()}else E.children?(d(E),m(h,E.children,0,E.children.length-1)):o.removeChild(h,E.elm)}}function _(h,v,g,b){let C=0,O=0,w=v.length-1,$=v[0],E=v[w],x=g.length-1,N=g[0],D=g[x],T,M,F,R;for(;C<=w&&O<=x;)$==null?$=v[++C]:E==null?E=v[--w]:N==null?N=g[++O]:D==null?D=g[--x]:Ot($,N)?(y($,N,b),$=v[++C],N=g[++O]):Ot(E,D)?(y(E,D,b),E=v[--w],D=g[--x]):Ot($,D)?(y($,D,b),o.insertBefore(h,$.elm,o.nextSibling(E.elm)),$=v[++C],D=g[--x]):Ot(E,N)?(y(E,N,b),o.insertBefore(h,E.elm,$.elm),E=v[--w],N=g[++O]):(T===void 0&&(T=Uo(v,C,w)),M=T[N.key],Dt(M)?(o.insertBefore(h,c(N,b),$.elm),N=g[++O]):Dt(T[D.key])?(o.insertBefore(h,c(D,b),o.nextSibling(E.elm)),D=g[--x]):(F=v[M],F.sel!==N.sel?o.insertBefore(h,c(N,b),$.elm):(y(F,N,b),v[M]=void 0,o.insertBefore(h,F.elm,$.elm)),N=g[++O]));O<=x&&(R=g[x+1]==null?null:g[x+1].elm,f(h,R,g,O,x,b)),C<=w&&m(h,v,C,w)}function y(h,v,g){var b,C,O,w,$,E,x,N;const D=(b=v.data)===null||b===void 0?void 0:b.hook;(C=D==null?void 0:D.prepatch)===null||C===void 0||C.call(D,h,v);const T=v.elm=h.elm;if(h===v)return;if(v.data!==void 0||U(v.text)&&v.text!==h.text){(O=v.data)!==null&&O!==void 0||(v.data={}),(w=h.data)!==null&&w!==void 0||(h.data={});for(let R=0;R<n.update.length;++R)n.update[R](h,v);(x=(E=($=v.data)===null||$===void 0?void 0:$.hook)===null||E===void 0?void 0:E.update)===null||x===void 0||x.call(E,h,v)}const M=h.children,F=v.children;Dt(v.text)?U(M)&&U(F)?M!==F&&_(T,M,F,g):U(F)?(U(h.text)&&o.setTextContent(T,""),f(T,null,F,0,F.length-1,g)):U(M)?m(T,M,0,M.length-1):U(h.text)&&o.setTextContent(T,""):h.text!==v.text&&(U(M)&&m(T,M,0,M.length-1),o.setTextContent(T,v.text)),(N=D==null?void 0:D.postpatch)===null||N===void 0||N.call(D,h,v)}return function(v,g){let b,C,O;const w=[];for(b=0;b<n.pre.length;++b)n.pre[b]();for(qo(o,v)?v=i(v):Go(o,v)&&(v=a(v)),Ot(v,g)?y(v,g,w):(C=v.elm,O=o.parentNode(C),c(g,w),O!==null&&(o.insertBefore(O,g.elm,o.nextSibling(C)),m(O,[v],0,0))),b=0;b<w.length;++b)w[b].data.hook.insert(w[b]);for(b=0;b<n.post.length;++b)n.post[b]();return g}}function ke(e,t,r){if(e.ns="http://www.w3.org/2000/svg",r!=="foreignObject"&&t!==void 0)for(let n=0;n<t.length;++n){const o=t[n];if(typeof o=="string")continue;const i=o.data;i!==void 0&&ke(i,o.children,o.sel)}}function rt(e,t,r){let n={},o,i,a;if(r!==void 0?(t!==null&&(n=t),Wt(r)?o=r:Mt(r)?i=r.toString():r&&r.sel&&(o=[r])):t!=null&&(Wt(t)?o=t:Mt(t)?i=t.toString():t&&t.sel?o=[t]:n=t),o!==void 0)for(a=0;a<o.length;++a)Mt(o[a])&&(o[a]=Z(void 0,void 0,void 0,o[a],void 0));return e.startsWith("svg")&&(e.length===3||e[3]==="."||e[3]==="#")&&ke(n,o,e),Z(e,n,o,i,void 0)}function Ce(e,t){const r=Jr;let n;if(r.isElement(e)){const o=e.id?"#"+e.id:"",i=e.getAttribute("class"),a=i?"."+i.split(" ").join("."):"",u=r.tagName(e).toLowerCase()+o+a,c={},f={},d={},m=[];let _,y,h;const v=e.attributes,g=e.childNodes;for(y=0,h=v.length;y<h;y++)_=v[y].nodeName,_.startsWith("data-")?f[_.slice(5)]=v[y].nodeValue||"":_!=="id"&&_!=="class"&&(c[_]=v[y].nodeValue);for(y=0,h=g.length;y<h;y++)m.push(Ce(g[y]));return Object.keys(c).length>0&&(d.attrs=c),Object.keys(f).length>0&&(d.dataset=f),u.startsWith("svg")&&(u.length===3||u[3]==="."||u[3]==="#")&&ke(d,m,u),Z(u,d,m,void 0,e)}else return r.isText(e)?(n=r.getTextContent(e),Z(void 0,void 0,void 0,n,e)):r.isComment(e)?(n=r.getTextContent(e),Z("!",{},[],n,e)):Z("",{},[],void 0,e)}const Vo="http://www.w3.org/1999/xlink",Ko="http://www.w3.org/2000/xmlns/",Yo="http://www.w3.org/XML/1998/namespace",cr=58,Jo=120,Xo=109;function fr(e,t){let r;const n=t.elm;let o=e.data.attrs,i=t.data.attrs;if(!(!o&&!i)&&o!==i){o=o||{},i=i||{};for(r in i){const a=i[r];o[r]!==a&&(a===!0?n.setAttribute(r,""):a===!1?n.removeAttribute(r):r.charCodeAt(0)!==Jo?n.setAttribute(r,a):r.charCodeAt(3)===cr?n.setAttributeNS(Yo,r,a):r.charCodeAt(5)===cr?r.charCodeAt(1)===Xo?n.setAttributeNS(Ko,r,a):n.setAttributeNS(Vo,r,a):n.setAttribute(r,a))}for(r in o)r in i||n.removeAttribute(r)}}const Zo={create:fr,update:fr};function lr(e,t){let r,n;const o=t.elm;let i=e.data.class,a=t.data.class;if(!(!i&&!a)&&i!==a){i=i||{},a=a||{};for(n in i)i[n]&&!Object.prototype.hasOwnProperty.call(a,n)&&o.classList.remove(n);for(n in a)r=a[n],r!==i[n]&&o.classList[r?"add":"remove"](n)}}const Qo={create:lr,update:lr},pr=/[A-Z]/g;function hr(e,t){const r=t.elm;let n=e.data.dataset,o=t.data.dataset,i;if(!n&&!o||n===o)return;n=n||{},o=o||{};const a=r.dataset;for(i in n)i in o||(a?i in a&&delete a[i]:r.removeAttribute("data-"+i.replace(pr,"-$&").toLowerCase()));for(i in o)n[i]!==o[i]&&(a?a[i]=o[i]:r.setAttribute("data-"+i.replace(pr,"-$&").toLowerCase(),o[i]))}const ti={create:hr,update:hr};function dr(e,t){let r,n,o;const i=t.elm;let a=e.data.props,u=t.data.props;if(!(!a&&!u)&&a!==u){a=a||{},u=u||{};for(r in u)n=u[r],o=a[r],o!==n&&(r!=="value"||i[r]!==n)&&(i[r]=n)}}const ei={create:dr,update:dr},yr=typeof(window==null?void 0:window.requestAnimationFrame)=="function"?window.requestAnimationFrame.bind(window):setTimeout,ri=function(e){yr(function(){yr(e)})};let Ee=!1;function ni(e,t,r){ri(function(){e[t]=r})}function mr(e,t){let r,n;const o=t.elm;let i=e.data.style,a=t.data.style;if(!i&&!a||i===a)return;i=i||{},a=a||{};const u="delayed"in i;for(n in i)n in a||(n[0]==="-"&&n[1]==="-"?o.style.removeProperty(n):o.style[n]="");for(n in a)if(r=a[n],n==="delayed"&&a.delayed)for(const c in a.delayed)r=a.delayed[c],(!u||r!==i.delayed[c])&&ni(o.style,c,r);else n!=="remove"&&r!==i[n]&&(n[0]==="-"&&n[1]==="-"?o.style.setProperty(n,r):o.style[n]=r)}function oi(e){let t,r;const n=e.elm,o=e.data.style;if(!(!o||!(t=o.destroy)))for(r in t)n.style[r]=t[r]}function ii(e,t){const r=e.data.style;if(!r||!r.remove){t();return}Ee||(e.elm.offsetLeft,Ee=!0);let n;const o=e.elm;let i=0;const a=r.remove;let u=0;const c=[];for(n in a)c.push(n),o.style[n]=a[n];const d=getComputedStyle(o)["transition-property"].split(", ");for(;i<d.length;++i)c.indexOf(d[i])!==-1&&u++;o.addEventListener("transitionend",function(m){m.target===o&&--u,u===0&&t()})}function si(){Ee=!1}const ai={pre:si,create:mr,update:mr,destroy:oi,remove:ii};function qt(e,t,r,n,o){r===void 0&&(r=!1),n===void 0&&(n=!1),o===void 0&&(o=!1);var i=null;return V.Stream.create({start:function(u){n?i=function(f){Zr(f,n),u.next(f)}:i=function(f){u.next(f)},e.addEventListener(t,i,{capture:r,passive:o})},stop:function(){e.removeEventListener(t,i,r),i=null}})}function Xr(e,t){for(var r=Object.keys(e),n=r.length,o=0;o<n;o++){var i=r[o];if(typeof e[i]=="object"&&typeof t[i]=="object"){if(!Xr(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1}return!0}function Zr(e,t){if(t)if(typeof t=="boolean")e.preventDefault();else if(ui(t))t(e)&&e.preventDefault();else if(typeof t=="object")Xr(t,e)&&e.preventDefault();else throw new Error("preventDefault has to be either a boolean, predicate function or object")}function ui(e){return typeof e=="function"}var ci=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=H.adapt(P.of([document]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=H.adapt(P.of(document));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=qt(document,t,r.useCapture,r.preventDefault);var i=H.adapt(o);return i._isCycleSource=this._name,i},e}(),fi=function(){function e(t){this._name=t}return e.prototype.select=function(t){return this},e.prototype.elements=function(){var t=H.adapt(P.of([document.body]));return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=H.adapt(P.of(document.body));return t._isCycleSource=this._name,t},e.prototype.events=function(t,r,n){r===void 0&&(r={});var o;o=qt(document.body,t,r.useCapture,r.preventDefault);var i=H.adapt(o);return i._isCycleSource=this._name,i},e}();function li(e){var t=1,r=11;return typeof HTMLElement=="object"?e instanceof HTMLElement||e instanceof DocumentFragment:e&&typeof e=="object"&&e!==null&&(e.nodeType===t||e.nodeType===r)&&typeof e.nodeName=="string"}function pi(e){return e.length>1&&(e[0]==="."||e[0]==="#")}function hi(e){return e.nodeType===11}function di(e){if(typeof e!="string"&&!li(e))throw new Error("Given container is not a DOM element neither a selector string.")}function yi(e){var t=typeof e=="string"?document.querySelector(e):e;if(typeof e=="string"&&t===null)throw new Error("Cannot render into unknown element `"+e+"`");return t}function Qr(e){for(var t="",r=e.length-1;r>=0&&e[r].type==="selector";r--)t=e[r].scope+" "+t;return t.trim()}function Te(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==t[r].type||e[r].scope!==t[r].scope)return!1;return!0}var tn=function(){function e(t,r){this.namespace=t,this.isolateModule=r,this._namespace=t.filter(function(n){return n.type!=="selector"})}return e.prototype.isDirectlyInScope=function(t){var r=this.isolateModule.getNamespace(t);if(!r||this._namespace.length>r.length||!Te(this._namespace,r.slice(0,this._namespace.length)))return!1;for(var n=this._namespace.length;n<r.length;n++)if(r[n].type==="total")return!1;return!0},e}();function mi(e){return Array.prototype.slice.call(e)}var en=function(){function e(t,r){this.namespace=t,this.isolateModule=r}return e.prototype.call=function(){var t=this.namespace,r=Qr(t),n=new tn(t,this.isolateModule),o=this.isolateModule.getElement(t.filter(function(i){return i.type!=="selector"}));return o===void 0?[]:r===""?[o]:mi(o.querySelectorAll(r)).filter(n.isDirectlyInScope,n).concat(o.matches(r)?[o]:[])},e}(),Nt=function(){return Nt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Nt.apply(this,arguments)};function vi(e){return function(t,r){return r===":root"?t:t.map(function(n){if(!n)return n;var o=rn(r),i=Nt({},n,{data:Nt({},n.data,{isolate:!n.data||!Array.isArray(n.data.isolate)?e.concat([o]):n.data.isolate})});return Nt({},i,{key:i.key!==void 0?i.key:JSON.stringify(i.data.isolate)})})}}function rn(e){return{type:pi(e)?"sibling":"total",scope:e}}var _i=function(){function e(t,r,n,o,i,a){n===void 0&&(n=[]),this._rootElement$=t,this._sanitation$=r,this._namespace=n,this._isolateModule=o,this._eventDelegator=i,this._name=a,this.isolateSource=function(u,c){return new e(u._rootElement$,u._sanitation$,u._namespace.concat(rn(c)),u._isolateModule,u._eventDelegator,u._name)},this.isolateSink=vi(this._namespace)}return e.prototype._elements=function(){if(this._namespace.length===0)return this._rootElement$.map(function(r){return[r]});var t=new en(this._namespace,this._isolateModule);return this._rootElement$.map(function(){return t.call()})},e.prototype.elements=function(){var t=H.adapt(this._elements().remember());return t._isCycleSource=this._name,t},e.prototype.element=function(){var t=H.adapt(this._elements().filter(function(r){return r.length>0}).map(function(r){return r[0]}).remember());return t._isCycleSource=this._name,t},Object.defineProperty(e.prototype,"namespace",{get:function(){return this._namespace},enumerable:!0,configurable:!0}),e.prototype.select=function(t){if(typeof t!="string")throw new Error("DOM driver's select() expects the argument to be a string as a CSS selector");if(t==="document")return new ci(this._name);if(t==="body")return new fi(this._name);var r=t===":root"?[]:this._namespace.concat({type:"selector",scope:t.trim()});return new e(this._rootElement$,this._sanitation$,r,this._isolateModule,this._eventDelegator,this._name)},e.prototype.events=function(t,r,n){if(r===void 0&&(r={}),typeof t!="string")throw new Error("DOM driver's events() expects argument to be a string representing the event type to listen for.");var o=this._eventDelegator.addEventListener(t,this._namespace,r,n),i=H.adapt(o);return i._isCycleSource=this._name,i},e.prototype.dispose=function(){this._sanitation$.shamefullySendNext(null)},e}(),Y={},vr;function gi(){if(vr)return Y;vr=1;var e=Y&&Y.__spreadArrays||function(){for(var a=0,u=0,c=arguments.length;u<c;u++)a+=arguments[u].length;for(var f=Array(a),d=0,u=0;u<c;u++)for(var m=arguments[u],_=0,y=m.length;_<y;_++,d++)f[d]=m[_];return f};Object.defineProperty(Y,"__esModule",{value:!0}),Y.SampleCombineOperator=Y.SampleCombineListener=void 0;var t=Vt(),r={},n=function(){function a(u,c){this.i=u,this.p=c,c.ils[u]=this}return a.prototype._n=function(u){var c=this.p;c.out!==r&&c.up(u,this.i)},a.prototype._e=function(u){this.p._e(u)},a.prototype._c=function(){this.p.down(this.i,this)},a}();Y.SampleCombineListener=n;var o=function(){function a(u,c){this.type="sampleCombine",this.ins=u,this.others=c,this.out=r,this.ils=[],this.Nn=0,this.vals=[]}return a.prototype._start=function(u){this.out=u;for(var c=this.others,f=this.Nn=c.length,d=this.vals=new Array(f),m=0;m<f;m++)d[m]=r,c[m]._add(new n(m,this));this.ins._add(this)},a.prototype._stop=function(){var u=this.others,c=u.length,f=this.ils;this.ins._remove(this);for(var d=0;d<c;d++)u[d]._remove(f[d]);this.out=r,this.vals=[],this.ils=[]},a.prototype._n=function(u){var c=this.out;c!==r&&(this.Nn>0||c._n(e([u],this.vals)))},a.prototype._e=function(u){var c=this.out;c!==r&&c._e(u)},a.prototype._c=function(){var u=this.out;u!==r&&u._c()},a.prototype.up=function(u,c){var f=this.vals[c];this.Nn>0&&f===r&&this.Nn--,this.vals[c]=u},a.prototype.down=function(u,c){this.others[u]._remove(c)},a}();Y.SampleCombineOperator=o;var i;return i=function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return function(d){return new t.Stream(new o(d,u))}},Y.default=i,Y}var bi=gi();const wi=gt(bi);function nn(e){if(!e.sel)return{tagName:"",id:"",className:""};var t=e.sel,r=t.indexOf("#"),n=t.indexOf(".",r),o=r>0?r:t.length,i=n>0?n:t.length,a=r!==-1||n!==-1?t.slice(0,Math.min(o,i)):t,u=o<i?t.slice(o+1,i):void 0,c=n>0?t.slice(i+1).replace(/\./g," "):void 0;return{tagName:a,id:u,className:c}}function Si(e){var t=nn(e).className,r=t===void 0?"":t;if(!e.data)return r;var n=e.data,o=n.class,i=n.props;if(o){var a=Object.keys(o).filter(function(u){return o[u]});r+=" "+a.join(" ")}return i&&i.className&&(r+=" "+i.className),r&&r.trim()}var Ct;typeof self<"u"?Ct=self:typeof window<"u"?Ct=window:typeof global<"u"?Ct=global:Ct=Function("return this")();var _r=Ct.Symbol;typeof _r=="function"&&_r("parent");var Oi=function(){function e(t){this.rootElement=t}return e.prototype.call=function(t){if(hi(this.rootElement))return this.wrapDocFrag(t===null?[]:[t]);if(t===null)return this.wrap([]);var r=nn(t),n=r.tagName,o=r.id,i=Si(t),a=t.data||{},u=a.props||{},c=u.id,f=c===void 0?o:c,d=typeof f=="string"&&f.toUpperCase()===this.rootElement.id.toUpperCase()&&n.toUpperCase()===this.rootElement.tagName.toUpperCase()&&i.toUpperCase()===this.rootElement.className.toUpperCase();return d?t:this.wrap([t])},e.prototype.wrapDocFrag=function(t){return Z("",{isolate:[]},t,void 0,this.rootElement)},e.prototype.wrap=function(t){var r=this.rootElement,n=r.tagName,o=r.id,i=r.className,a=o?"#"+o:"",u=i?"."+i.split(" ").join("."):"",c=rt(""+n.toLowerCase()+a+u,{},t);return c.data=c.data||{},c.data.isolate=c.data.isolate||[],c},e}(),Ai=[ai,Qo,ei,Zo,ti],on=function(){function e(t){this.mapper=t,this.tree=[void 0,{}]}return e.prototype.set=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,a=0;a<i;a++){var u=this.mapper(t[a]),c=o[1][u];c||(c=[void 0,{}],o[1][u]=c),o=c}o[0]=r},e.prototype.getDefault=function(t,r,n){return this.get(t,r,n)},e.prototype.get=function(t,r,n){for(var o=this.tree,i=n!==void 0?n:t.length,a=0;a<i;a++){var u=this.mapper(t[a]),c=o[1][u];if(!c)if(r)c=[void 0,{}],o[1][u]=c;else return;o=c}return r&&!o[0]&&(o[0]=r()),o[0]},e.prototype.delete=function(t){for(var r=this.tree,n=0;n<t.length-1;n++){var o=r[1][this.mapper(t[n])];if(!o)return;r=o}delete r[1][this.mapper(t[t.length-1])]},e}(),$i=function(){function e(){this.namespaceTree=new on(function(t){return t.scope}),this.namespaceByElement=new Map,this.vnodesBeingRemoved=[]}return e.prototype.setEventDelegator=function(t){this.eventDelegator=t},e.prototype.insertElement=function(t,r){this.namespaceByElement.set(r,t),this.namespaceTree.set(t,r)},e.prototype.removeElement=function(t){this.namespaceByElement.delete(t);var r=this.getNamespace(t);r&&this.namespaceTree.delete(r)},e.prototype.getElement=function(t,r){return this.namespaceTree.get(t,void 0,r)},e.prototype.getRootElement=function(t){if(this.namespaceByElement.has(t))return t;for(var r=t;!this.namespaceByElement.has(r);)if(r=r.parentNode,r){if(r.tagName==="HTML")throw new Error("No root element found, this should not happen at all")}else return;return r},e.prototype.getNamespace=function(t){var r=this.getRootElement(t);if(r)return this.namespaceByElement.get(r)},e.prototype.createModule=function(){var t=this;return{create:function(r,n){var o=n.elm,i=n.data,a=i===void 0?{}:i,u=a.isolate;Array.isArray(u)&&t.insertElement(u,o)},update:function(r,n){var o=r.elm,i=r.data,a=i===void 0?{}:i,u=n.elm,c=n.data,f=c===void 0?{}:c,d=a.isolate,m=f.isolate;Te(d,m)||Array.isArray(d)&&t.removeElement(o),Array.isArray(m)&&t.insertElement(m,u)},destroy:function(r){t.vnodesBeingRemoved.push(r)},remove:function(r,n){t.vnodesBeingRemoved.push(r),n()},post:function(){for(var r=t.vnodesBeingRemoved,n=r.length-1;n>=0;n--){var o=r[n],i=o.data!==void 0?o.data.isolation:void 0;i!==void 0&&t.removeElement(i),t.eventDelegator.removeElement(o.elm,i)}t.vnodesBeingRemoved=[]}}},e}(),Ci=function(){function e(){this.arr=[],this.prios=[]}return e.prototype.add=function(t,r){for(var n=0;n<this.arr.length;n++)if(this.prios[n]<r){this.arr.splice(n,0,t),this.prios.splice(n,0,r);return}this.arr.push(t),this.prios.push(r)},e.prototype.forEach=function(t){for(var r=0;r<this.arr.length;r++)t(this.arr[r],r,this.arr)},e.prototype.delete=function(t){for(var r=0;r<this.arr.length;r++)if(this.arr[r]===t){this.arr.splice(r,1),this.prios.splice(r,1);return}},e}(),Gt=function(){return Gt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Gt.apply(this,arguments)},Ei=["blur","canplay","canplaythrough","durationchange","emptied","ended","focus","load","loadeddata","loadedmetadata","mouseenter","mouseleave","pause","play","playing","ratechange","reset","scroll","seeked","seeking","stalled","submit","suspend","timeupdate","unload","volumechange","waiting"],Ni=function(){function e(t,r){var n=this;this.rootElement$=t,this.isolateModule=r,this.virtualListeners=new on(function(o){return o.scope}),this.nonBubblingListenersToAdd=new Set,this.virtualNonBubblingListener=[],this.isolateModule.setEventDelegator(this),this.domListeners=new Map,this.domListenersToAdd=new Map,this.nonBubblingListeners=new Map,t.addListener({next:function(o){n.origin!==o&&(n.origin=o,n.resetEventListeners(),n.domListenersToAdd.forEach(function(i,a){return n.setupDOMListener(a,i)}),n.domListenersToAdd.clear()),n.nonBubblingListenersToAdd.forEach(function(i){n.setupNonBubblingListener(i)})}})}return e.prototype.addEventListener=function(t,r,n,o){var i=P.never(),a,u=new tn(r,this.isolateModule),c=o===void 0?Ei.indexOf(t)===-1:o;if(c)return this.domListeners.has(t)||this.setupDOMListener(t,!!n.passive),a=this.insertListener(i,u,t,n),i;var f=[];this.nonBubblingListenersToAdd.forEach(function($){return f.push($)});for(var d=void 0,m=0,_=f.length,y=function($){$[0];var E=$[1],x=$[2];return $[3],t===E&&Te(x.namespace,r)};!d&&m<_;){var h=f[m];d=y(h)?h:d,m++}var v=d,g;if(v){var C=v[0];g=C}else{var b=new en(r,this.isolateModule);a=this.insertListener(i,u,t,n),v=[i,t,b,a],g=i,this.nonBubblingListenersToAdd.add(v),this.setupNonBubblingListener(v)}var O=this,w=null;return P.create({start:function($){w=g.subscribe($)},stop:function(){v[0];var $=v[1],E=v[2];v[3];var x=E.call();x.forEach(function(N){var D=N.subs;D&&D[$]&&(D[$].unsubscribe(),delete D[$])}),O.nonBubblingListenersToAdd.delete(v),w.unsubscribe()}})},e.prototype.removeElement=function(t,r){r!==void 0&&this.virtualListeners.delete(r);var n=[];this.nonBubblingListeners.forEach(function(a,u){if(a.has(t)){n.push([u,t]);var c=t.subs;c&&Object.keys(c).forEach(function(f){c[f].unsubscribe()})}});for(var o=0;o<n.length;o++){var i=this.nonBubblingListeners.get(n[o][0]);i&&(i.delete(n[o][1]),i.size===0?this.nonBubblingListeners.delete(n[o][0]):this.nonBubblingListeners.set(n[o][0],i))}},e.prototype.insertListener=function(t,r,n,o){var i=[],a=r._namespace,u=a.length;do i.push(this.getVirtualListeners(n,a,!0,u)),u--;while(u>=0&&a[u].type!=="total");for(var c=Gt({},o,{scopeChecker:r,subject:t,bubbles:!!o.bubbles,useCapture:!!o.useCapture,passive:!!o.passive}),f=0;f<i.length;f++)i[f].add(c,a.length);return c},e.prototype.getVirtualListeners=function(t,r,n,o){n===void 0&&(n=!1);var i=o!==void 0?o:r.length;if(!n)for(var a=i-1;a>=0;a--){if(r[a].type==="total"){i=a+1;break}i=a}var u=this.virtualListeners.getDefault(r,function(){return new Map},i);return u.has(t)||u.set(t,new Ci),u.get(t)},e.prototype.setupDOMListener=function(t,r){var n=this;if(this.origin){var o=qt(this.origin,t,!1,!1,r).subscribe({next:function(i){return n.onEvent(t,i,r)},error:function(){},complete:function(){}});this.domListeners.set(t,{sub:o,passive:r})}else this.domListenersToAdd.set(t,r)},e.prototype.setupNonBubblingListener=function(t){t[0];var r=t[1],n=t[2],o=t[3];if(this.origin){var i=n.call();if(i.length){var a=this;i.forEach(function(u){var c,f=u.subs;if(!f||!f[r]){var d=qt(u,r,!1,!1,o.passive).subscribe({next:function(_){return a.onEvent(r,_,!!o.passive,!1)},error:function(){},complete:function(){}});a.nonBubblingListeners.has(r)||a.nonBubblingListeners.set(r,new Map);var m=a.nonBubblingListeners.get(r);if(!m)return;m.set(u,{sub:d,destination:o}),u.subs=Gt({},f,(c={},c[r]=d,c))}})}}},e.prototype.resetEventListeners=function(){for(var t=this.domListeners.entries(),r=t.next();!r.done;){var n=r.value,o=n[0],i=n[1],a=i.sub,u=i.passive;a.unsubscribe(),this.setupDOMListener(o,u),r=t.next()}},e.prototype.putNonBubblingListener=function(t,r,n,o){var i=this.nonBubblingListeners.get(t);if(i){var a=i.get(r);a&&a.destination.passive===o&&a.destination.useCapture===n&&(this.virtualNonBubblingListener[0]=a.destination)}},e.prototype.onEvent=function(t,r,n,o){o===void 0&&(o=!0);var i=this.patchEvent(r),a=this.isolateModule.getRootElement(r.target);if(o){var u=this.isolateModule.getNamespace(r.target);if(!u)return;var c=this.getVirtualListeners(t,u);this.bubble(t,r.target,a,i,c,u,u.length-1,!0,n),this.bubble(t,r.target,a,i,c,u,u.length-1,!1,n)}else this.putNonBubblingListener(t,r.target,!0,n),this.doBubbleStep(t,r.target,a,i,this.virtualNonBubblingListener,!0,n),this.putNonBubblingListener(t,r.target,!1,n),this.doBubbleStep(t,r.target,a,i,this.virtualNonBubblingListener,!1,n),r.stopPropagation()},e.prototype.bubble=function(t,r,n,o,i,a,u,c,f){!c&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,c,f);var d=n,m=u;if(r===n)if(u>=0&&a[u].type==="sibling")d=this.isolateModule.getElement(a,u),m--;else return;r.parentNode&&d&&this.bubble(t,r.parentNode,d,o,i,a,m,c,f),c&&!o.propagationHasBeenStopped&&this.doBubbleStep(t,r,n,o,i,c,f)},e.prototype.doBubbleStep=function(t,r,n,o,i,a,u){n&&(this.mutateEventCurrentTarget(o,r),i.forEach(function(c){if(c.passive===u&&c.useCapture===a){var f=Qr(c.scopeChecker.namespace);!o.propagationHasBeenStopped&&c.scopeChecker.isDirectlyInScope(r)&&(f!==""&&r.matches(f)||f===""&&r===n)&&(Zr(o,c.preventDefault),c.subject.shamefullySendNext(o))}}))},e.prototype.patchEvent=function(t){var r=t;r.propagationHasBeenStopped=!1;var n=r.stopPropagation;return r.stopPropagation=function(){n.call(this),this.propagationHasBeenStopped=!0},r},e.prototype.mutateEventCurrentTarget=function(t,r){try{Object.defineProperty(t,"currentTarget",{value:r,configurable:!0})}catch{console.log("please use event.ownerTarget")}t.ownerTarget=r},e}();function Pi(e){if(!Array.isArray(e))throw new Error("Optional modules option must be an array for snabbdom modules")}function xi(e){if(!e||typeof e.addListener!="function"||typeof e.fold!="function")throw new Error("The DOM driver function expects as input a Stream of virtual DOM elements")}function Ii(e){return P.merge(e,P.never())}function Di(e){return e.elm}function ki(e){(console.error||console.log)(e)}function Ti(){return P.create({start:function(e){document.readyState==="loading"?document.addEventListener("readystatechange",function(){var t=document.readyState;(t==="interactive"||t==="complete")&&(e.next(null),e.complete())}):(e.next(null),e.complete())},stop:function(){}})}function Mi(e){return e.data=e.data||{},e.data.isolate=[],e}function Li(e,t){t===void 0&&(t={}),di(e);var r=t.modules||Ai;Pi(r);var n=new $i,o=t&&t.snabbdomOptions||void 0,i=zo([n.createModule()].concat(r),void 0,o),a=Ti(),u,c,f=P.create({start:function(m){c=new MutationObserver(function(){return m.next(null)})},stop:function(){c.disconnect()}});function d(m,_){_===void 0&&(_="DOM"),xi(m);var y=P.create(),h=a.map(function(){var O=yi(e)||document.body;return u=new Oi(O),O}),v=m.remember();v.addListener({}),f.addListener({});var g=h.map(function(O){return P.merge(v.endWhen(y),y).map(function(w){return u.call(w)}).startWith(Mi(Ce(O))).fold(i,Ce(O)).drop(1).map(Di).startWith(O).map(function(w){return c.observe(w,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0}),w}).compose(Ii)}).flatten(),b=Vr(a,f).endWhen(y).compose(wi(g)).map(function(O){return O[1]}).remember();b.addListener({error:t.reportSnabbdomError||ki});var C=new Ni(b,n);return new _i(b,y,[],n,C,_)}return d}function ji(e){return typeof e=="string"&&e.length>0}function Fi(e){return ji(e)&&(e[0]==="."||e[0]==="#")}function sn(e){return function(r,n,o){var i=typeof r<"u",a=typeof n<"u",u=typeof o<"u";return Fi(r)?a&&u?rt(e+r,n,o):a?rt(e+r,n):rt(e+r,{}):u?rt(e+r,n,o):a?rt(e,r,n):i?rt(e,r):rt(e,{})}}var Ri=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","colorProfile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotlight","feTile","feTurbulence","filter","font","fontFace","fontFaceFormat","fontFaceName","fontFaceSrc","fontFaceUri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missingGlyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Bi=sn("svg");Ri.forEach(function(e){Bi[e]=sn(e)});var Wi=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dir","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","meta","nav","noscript","object","ol","optgroup","option","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","u","ul","video"];Wi.forEach(function(e){});function qi(){var e;return typeof window<"u"?e=window:typeof global<"u"?e=global:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function Gi(e){return qi().adaptStream(e)}function Ui(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=P.create());return t}function Hi(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n](t[n],n),r[n]&&typeof r[n]=="object"&&(r[n]._isCycleSource=n));return r}function zi(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&typeof e[t].shamefullySendNext=="function"&&(e[t]=Gi(e[t]));return e}function Vi(e,t){var r=Kr(),n=Object.keys(e).filter(function(u){return!!t[u]}),o={},i={};n.forEach(function(u){o[u]={_n:[],_e:[]},i[u]={next:function(c){return o[u]._n.push(c)},error:function(c){return o[u]._e.push(c)},complete:function(){}}});var a=n.map(function(u){return P.fromObservable(e[u]).subscribe(i[u])});return n.forEach(function(u){var c=t[u],f=function(m){r(function(){return c._n(m)})},d=function(m){r(function(){(console.error||console.log)(m),c._e(m)})};o[u]._n.forEach(f),o[u]._e.forEach(d),i[u].next=f,i[u].error=d,i[u]._n=f,i[u]._e=d}),o=null,function(){a.forEach(function(c){return c.unsubscribe()})}}function Ki(e){Object.keys(e).forEach(function(t){return e[t]._c()})}function Yi(e){for(var t in e)e.hasOwnProperty(t)&&e[t]&&e[t].dispose&&e[t].dispose()}function an(e){return Object.keys(e).length===0}function Ji(e,t){if(typeof e!="function")throw new Error("First argument given to Cycle must be the 'main' function.");if(typeof t!="object"||t===null)throw new Error("Second argument given to Cycle must be an object with driver functions as properties.");if(an(t))throw new Error("Second argument given to Cycle must be an object with at least one driver function declared as a property.");var r=Xi(t),n=e(r.sources);typeof window<"u"&&(window.Cyclejs=window.Cyclejs||{},window.Cyclejs.sinks=n);function o(){var i=r.run(n);return function(){i(),r.dispose()}}return{sinks:n,sources:r.sources,run:o}}function Xi(e){if(typeof e!="object"||e===null)throw new Error("Argument given to setupReusable must be an object with driver functions as properties.");if(an(e))throw new Error("Argument given to setupReusable must be an object with at least one driver function declared as a property.");var t=Ui(e),r=Hi(e,t),n=zi(r);function o(a){return Vi(a,t)}function i(){Yi(n),Ki(t)}return{sources:n,run:o,dispose:i}}var Zi={};function Qi(e,t,r={}){const{combineList:n=["DOM"],globalList:o=["EVENTS"],stateSourceName:i="STATE",domSourceName:a="DOM",container:u="div",containerClass:c}=r;return f=>{const d=Date.now(),m={item:e,itemKey:(y,h)=>typeof y.id<"u"?y.id:h,itemScope:y=>y,channel:i,collectSinks:y=>Object.entries(f).reduce((h,[v,g])=>{if(n.includes(v)){const b=y.pickCombine(v);v===a&&u?h[a]=b.map(C=>({sel:u,data:c?{props:{className:c}}:{},children:C,key:d,text:void 0,elm:void 0})):h[v]=b}else h[v]=y.pickMerge(v);return h},{})},_={[i]:t};return o.forEach(y=>_[y]=null),n.forEach(y=>_[y]=null),ts(m,_,f)}}function ts(e,t,r){return it(bo(e),t)(r)}var z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Kt={},q={},un={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=t;function t(r){var n,o=r.Symbol;if(typeof o=="function")if(o.observable)n=o.observable;else{n=o.for("https://github.com/benlesh/symbol-observable");try{o.observable=n}catch{}}else n="@@observable";return n}})(un);var es=un,gr=Object.prototype.toString,cn=function(t){var r=gr.call(t),n=r==="[object Arguments]";return n||(n=r!=="[object Array]"&&t!==null&&typeof t=="object"&&typeof t.length=="number"&&t.length>=0&&gr.call(t.callee)==="[object Function]"),n},ye,br;function rs(){if(br)return ye;br=1;var e;if(!Object.keys){var t=Object.prototype.hasOwnProperty,r=Object.prototype.toString,n=cn,o=Object.prototype.propertyIsEnumerable,i=!o.call({toString:null},"toString"),a=o.call(function(){},"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(_){var y=_.constructor;return y&&y.prototype===_},f={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},d=function(){if(typeof window>"u")return!1;for(var _ in window)try{if(!f["$"+_]&&t.call(window,_)&&window[_]!==null&&typeof window[_]=="object")try{c(window[_])}catch{return!0}}catch{return!0}return!1}(),m=function(_){if(typeof window>"u"||!d)return c(_);try{return c(_)}catch{return!1}};e=function(y){var h=y!==null&&typeof y=="object",v=r.call(y)==="[object Function]",g=n(y),b=h&&r.call(y)==="[object String]",C=[];if(!h&&!v&&!g)throw new TypeError("Object.keys called on a non-object");var O=a&&v;if(b&&y.length>0&&!t.call(y,0))for(var w=0;w<y.length;++w)C.push(String(w));if(g&&y.length>0)for(var $=0;$<y.length;++$)C.push(String($));else for(var E in y)!(O&&E==="prototype")&&t.call(y,E)&&C.push(String(E));if(i)for(var x=m(y),N=0;N<u.length;++N)!(x&&u[N]==="constructor")&&t.call(y,u[N])&&C.push(u[N]);return C}}return ye=e,ye}var ns=Array.prototype.slice,os=cn,wr=Object.keys,Lt=wr?function(t){return wr(t)}:rs(),Sr=Object.keys;Lt.shim=function(){if(Object.keys){var t=function(){var r=Object.keys(arguments);return r&&r.length===arguments.length}(1,2);t||(Object.keys=function(n){return os(n)?Sr(ns.call(n)):Sr(n)})}else Object.keys=Lt;return Object.keys||Lt};var is=Lt,ss=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var o=42;t[r]=o;for(r in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var i=Object.getOwnPropertySymbols(t);if(i.length!==1||i[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(t,r);if(a.value!==o||a.enumerable!==!0)return!1}return!0},Or=typeof Symbol<"u"&&Symbol,as=ss,us=function(){return typeof Or!="function"||typeof Symbol!="function"||typeof Or("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:as()},Ar={foo:{}},cs=Object,fs=function(){return{__proto__:Ar}.foo===Ar.foo&&!({__proto__:null}instanceof cs)},ls="Function.prototype.bind called on incompatible ",me=Array.prototype.slice,ps=Object.prototype.toString,hs="[object Function]",ds=function(t){var r=this;if(typeof r!="function"||ps.call(r)!==hs)throw new TypeError(ls+r);for(var n=me.call(arguments,1),o,i=function(){if(this instanceof o){var d=r.apply(this,n.concat(me.call(arguments)));return Object(d)===d?d:this}else return r.apply(t,n.concat(me.call(arguments)))},a=Math.max(0,r.length-n.length),u=[],c=0;c<a;c++)u.push("$"+c);if(o=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(i),r.prototype){var f=function(){};f.prototype=r.prototype,o.prototype=new f,f.prototype=null}return o},ys=ds,fn=Function.prototype.bind||ys,ms=fn,vs=ms.call(Function.call,Object.prototype.hasOwnProperty),k,vt=SyntaxError,ln=Function,mt=TypeError,ve=function(e){try{return ln('"use strict"; return ('+e+").constructor;")()}catch{}},lt=Object.getOwnPropertyDescriptor;if(lt)try{lt({},"")}catch{lt=null}var _e=function(){throw new mt},_s=lt?function(){try{return arguments.callee,_e}catch{try{return lt(arguments,"callee").get}catch{return _e}}}():_e,dt=us(),gs=fs(),B=Object.getPrototypeOf||(gs?function(e){return e.__proto__}:null),yt={},bs=typeof Uint8Array>"u"||!B?k:B(Uint8Array),pt={"%AggregateError%":typeof AggregateError>"u"?k:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?k:ArrayBuffer,"%ArrayIteratorPrototype%":dt&&B?B([][Symbol.iterator]()):k,"%AsyncFromSyncIteratorPrototype%":k,"%AsyncFunction%":yt,"%AsyncGenerator%":yt,"%AsyncGeneratorFunction%":yt,"%AsyncIteratorPrototype%":yt,"%Atomics%":typeof Atomics>"u"?k:Atomics,"%BigInt%":typeof BigInt>"u"?k:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?k:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?k:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?k:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?k:Float32Array,"%Float64Array%":typeof Float64Array>"u"?k:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?k:FinalizationRegistry,"%Function%":ln,"%GeneratorFunction%":yt,"%Int8Array%":typeof Int8Array>"u"?k:Int8Array,"%Int16Array%":typeof Int16Array>"u"?k:Int16Array,"%Int32Array%":typeof Int32Array>"u"?k:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":dt&&B?B(B([][Symbol.iterator]())):k,"%JSON%":typeof JSON=="object"?JSON:k,"%Map%":typeof Map>"u"?k:Map,"%MapIteratorPrototype%":typeof Map>"u"||!dt||!B?k:B(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?k:Promise,"%Proxy%":typeof Proxy>"u"?k:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?k:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?k:Set,"%SetIteratorPrototype%":typeof Set>"u"||!dt||!B?k:B(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?k:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":dt&&B?B(""[Symbol.iterator]()):k,"%Symbol%":dt?Symbol:k,"%SyntaxError%":vt,"%ThrowTypeError%":_s,"%TypedArray%":bs,"%TypeError%":mt,"%Uint8Array%":typeof Uint8Array>"u"?k:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?k:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?k:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?k:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?k:WeakMap,"%WeakRef%":typeof WeakRef>"u"?k:WeakRef,"%WeakSet%":typeof WeakSet>"u"?k:WeakSet};if(B)try{null.error}catch(e){var ws=B(B(e));pt["%Error.prototype%"]=ws}var Ss=function e(t){var r;if(t==="%AsyncFunction%")r=ve("async function () {}");else if(t==="%GeneratorFunction%")r=ve("function* () {}");else if(t==="%AsyncGeneratorFunction%")r=ve("async function* () {}");else if(t==="%AsyncGenerator%"){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(t==="%AsyncIteratorPrototype%"){var o=e("%AsyncGenerator%");o&&B&&(r=B(o.prototype))}return pt[t]=r,r},$r={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Pt=fn,Ut=vs,Os=Pt.call(Function.call,Array.prototype.concat),As=Pt.call(Function.apply,Array.prototype.splice),Cr=Pt.call(Function.call,String.prototype.replace),Ht=Pt.call(Function.call,String.prototype.slice),$s=Pt.call(Function.call,RegExp.prototype.exec),Cs=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Es=/\\(\\)?/g,Ns=function(t){var r=Ht(t,0,1),n=Ht(t,-1);if(r==="%"&&n!=="%")throw new vt("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new vt("invalid intrinsic syntax, expected opening `%`");var o=[];return Cr(t,Cs,function(i,a,u,c){o[o.length]=u?Cr(c,Es,"$1"):a||i}),o},Ps=function(t,r){var n=t,o;if(Ut($r,n)&&(o=$r[n],n="%"+o[0]+"%"),Ut(pt,n)){var i=pt[n];if(i===yt&&(i=Ss(n)),typeof i>"u"&&!r)throw new mt("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:o,name:n,value:i}}throw new vt("intrinsic "+t+" does not exist!")},xs=function(t,r){if(typeof t!="string"||t.length===0)throw new mt("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new mt('"allowMissing" argument must be a boolean');if($s(/^%?[^%]*%?$/,t)===null)throw new vt("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Ns(t),o=n.length>0?n[0]:"",i=Ps("%"+o+"%",r),a=i.name,u=i.value,c=!1,f=i.alias;f&&(o=f[0],As(n,Os([0,1],f)));for(var d=1,m=!0;d<n.length;d+=1){var _=n[d],y=Ht(_,0,1),h=Ht(_,-1);if((y==='"'||y==="'"||y==="`"||h==='"'||h==="'"||h==="`")&&y!==h)throw new vt("property names with quotes must have matching quotes");if((_==="constructor"||!m)&&(c=!0),o+="."+_,a="%"+o+"%",Ut(pt,a))u=pt[a];else if(u!=null){if(!(_ in u)){if(!r)throw new mt("base intrinsic for "+t+" exists, but the property is not available.");return}if(lt&&d+1>=n.length){var v=lt(u,_);m=!!v,m&&"get"in v&&!("originalValue"in v.get)?u=v.get:u=u[_]}else m=Ut(u,_),u=u[_];m&&!c&&(pt[a]=u)}}return u},Is=xs,Ne=Is("%Object.defineProperty%",!0),Pe=function(){if(Ne)try{return Ne({},"a",{value:1}),!0}catch{return!1}return!1};Pe.hasArrayLengthDefineBug=function(){if(!Pe())return null;try{return Ne([],"length",{value:1}).length!==1}catch{return!0}};var Ds=Pe,ks=is,Ts=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",Ms=Object.prototype.toString,Ls=Array.prototype.concat,pn=Object.defineProperty,js=function(e){return typeof e=="function"&&Ms.call(e)==="[object Function]"},Fs=Ds(),hn=pn&&Fs,Rs=function(e,t,r,n){if(t in e){if(n===!0){if(e[t]===r)return}else if(!js(n)||!n())return}hn?pn(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r},dn=function(e,t){var r=arguments.length>2?arguments[2]:{},n=ks(t);Ts&&(n=Ls.call(n,Object.getOwnPropertySymbols(t)));for(var o=0;o<n.length;o+=1)Rs(e,n[o],t[n[o]],r[n[o]])};dn.supportsDescriptors=!!hn;var yn=dn,mn=z,Bs=mn,vn=function(){return typeof z!="object"||!z||z.Math!==Math||z.Array!==Array?Bs:z},Ws=yn,qs=vn,Gs=function(){var t=qs();if(Ws.supportsDescriptors){var r=Object.getOwnPropertyDescriptor(t,"globalThis");(!r||r.configurable&&(r.enumerable||!r.writable||globalThis!==t))&&Object.defineProperty(t,"globalThis",{configurable:!0,enumerable:!1,value:t,writable:!0})}else(typeof globalThis!="object"||globalThis!==t)&&(t.globalThis=t);return t},Us=yn,Hs=mn,_n=vn,zs=Gs,Vs=_n(),gn=function(){return Vs};Us(gn,{getPolyfill:_n,implementation:Hs,shim:zs});var Ks=gn,Ys=z&&z.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(q,"__esModule",{value:!0});q.NO_IL=q.NO=q.MemoryStream=q.Stream=void 0;var Js=es,Xs=Ks,kt=Js.default(Xs.getPolyfill()),A={};q.NO=A;function W(){}function jt(e){for(var t=e.length,r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function Zs(e,t){return function(n){return e(n)&&t(n)}}function Me(e,t,r){try{return e.f(t)}catch(n){return r._e(n),A}}var ct={_n:W,_e:W,_c:W};q.NO_IL=ct;function Er(e){e._start=function(r){r.next=r._n,r.error=r._e,r.complete=r._c,this.start(r)},e._stop=e.stop}var Qs=function(){function e(t,r){this._stream=t,this._listener=r}return e.prototype.unsubscribe=function(){this._stream._remove(this._listener)},e}(),ta=function(){function e(t){this._listener=t}return e.prototype.next=function(t){this._listener._n(t)},e.prototype.error=function(t){this._listener._e(t)},e.prototype.complete=function(){this._listener._c()},e}(),ea=function(){function e(t){this.type="fromObservable",this.ins=t,this.active=!1}return e.prototype._start=function(t){this.out=t,this.active=!0,this._sub=this.ins.subscribe(new ta(t)),this.active||this._sub.unsubscribe()},e.prototype._stop=function(){this._sub&&this._sub.unsubscribe(),this.active=!1},e}(),ra=function(){function e(t){this.type="merge",this.insArr=t,this.out=A,this.ac=0}return e.prototype._start=function(t){this.out=t;var r=this.insArr,n=r.length;this.ac=n;for(var o=0;o<n;o++)r[o]._add(this)},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=0;n<r;n++)t[n]._remove(this);this.out=A},e.prototype._n=function(t){var r=this.out;r!==A&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){if(--this.ac<=0){var t=this.out;if(t===A)return;t._c()}},e}(),na=function(){function e(t,r,n){this.i=t,this.out=r,this.p=n,n.ils.push(this)}return e.prototype._n=function(t){var r=this.p,n=this.out;if(n!==A&&r.up(t,this.i)){var o=jt(r.vals);n._n(o)}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.p;t.out!==A&&--t.Nc===0&&t.out._c()},e}(),oa=function(){function e(t){this.type="combine",this.insArr=t,this.out=A,this.ils=[],this.Nc=this.Nn=0,this.vals=[]}return e.prototype.up=function(t,r){var n=this.vals[r],o=this.Nn?n===A?--this.Nn:this.Nn:0;return this.vals[r]=t,o===0},e.prototype._start=function(t){this.out=t;var r=this.insArr,n=this.Nc=this.Nn=r.length,o=this.vals=new Array(n);if(n===0)t._n([]),t._c();else for(var i=0;i<n;i++)o[i]=A,r[i]._add(new na(i,t,this))},e.prototype._stop=function(){for(var t=this.insArr,r=t.length,n=this.ils,o=0;o<r;o++)t[o]._remove(n[o]);this.out=A,this.ils=[],this.vals=[]},e}(),ia=function(){function e(t){this.type="fromArray",this.a=t}return e.prototype._start=function(t){for(var r=this.a,n=0,o=r.length;n<o;n++)t._n(r[n]);t._c()},e.prototype._stop=function(){},e}(),sa=function(){function e(t){this.type="fromPromise",this.on=!1,this.p=t}return e.prototype._start=function(t){var r=this;this.on=!0,this.p.then(function(n){r.on&&(t._n(n),t._c())},function(n){t._e(n)}).then(W,function(n){setTimeout(function(){throw n})})},e.prototype._stop=function(){this.on=!1},e}(),aa=function(){function e(t){this.type="periodic",this.period=t,this.intervalID=-1,this.i=0}return e.prototype._start=function(t){var r=this;function n(){t._n(r.i++)}this.intervalID=setInterval(n,this.period)},e.prototype._stop=function(){this.intervalID!==-1&&clearInterval(this.intervalID),this.intervalID=-1,this.i=0},e}(),ua=function(){function e(t,r){this.type="debug",this.ins=t,this.out=A,this.s=W,this.l="",typeof r=="string"?this.l=r:typeof r=="function"&&(this.s=r)}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A},e.prototype._n=function(t){var r=this.out;if(r!==A){var n=this.s,o=this.l;if(n!==W)try{n(t)}catch(i){r._e(i)}else o?console.log(o+":",t):console.log(t);r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),ca=function(){function e(t,r){this.type="drop",this.ins=r,this.out=A,this.max=t,this.dropped=0}return e.prototype._start=function(t){this.out=t,this.dropped=0,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A},e.prototype._n=function(t){var r=this.out;r!==A&&this.dropped++>=this.max&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),fa=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(){this.op.end()},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.end()},e}(),la=function(){function e(t,r){this.type="endWhen",this.ins=r,this.out=A,this.o=t,this.oil=ct}return e.prototype._start=function(t){this.out=t,this.o._add(this.oil=new fa(t,this)),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.o._remove(this.oil),this.out=A,this.oil=ct},e.prototype.end=function(){var t=this.out;t!==A&&t._c()},e.prototype._n=function(t){var r=this.out;r!==A&&r._n(t)},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){this.end()},e}(),ge=function(){function e(t,r){this.type="filter",this.ins=r,this.out=A,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A},e.prototype._n=function(t){var r=this.out;if(r!==A){var n=Me(this,t,r);n===A||!n||r._n(t)}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),pa=function(){function e(t,r){this.out=t,this.op=r}return e.prototype._n=function(t){this.out._n(t)},e.prototype._e=function(t){this.out._e(t)},e.prototype._c=function(){this.op.inner=A,this.op.less()},e}(),ha=function(){function e(t){this.type="flatten",this.ins=t,this.out=A,this.open=!0,this.inner=A,this.il=ct}return e.prototype._start=function(t){this.out=t,this.open=!0,this.inner=A,this.il=ct,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.inner!==A&&this.inner._remove(this.il),this.out=A,this.open=!0,this.inner=A,this.il=ct},e.prototype.less=function(){var t=this.out;t!==A&&!this.open&&this.inner===A&&t._c()},e.prototype._n=function(t){var r=this.out;if(r!==A){var n=this,o=n.inner,i=n.il;o!==A&&i!==ct&&o._remove(i),(this.inner=t)._add(this.il=new pa(r,this))}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){this.open=!1,this.less()},e}(),da=function(){function e(t,r,n){var o=this;this.type="fold",this.ins=n,this.out=A,this.f=function(i){return t(o.acc,i)},this.acc=this.seed=r}return e.prototype._start=function(t){this.out=t,this.acc=this.seed,t._n(this.acc),this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A,this.acc=this.seed},e.prototype._n=function(t){var r=this.out;if(r!==A){var n=Me(this,t,r);n!==A&&r._n(this.acc=n)}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),ya=function(){function e(t){this.type="last",this.ins=t,this.out=A,this.has=!1,this.val=A}return e.prototype._start=function(t){this.out=t,this.has=!1,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A,this.val=A},e.prototype._n=function(t){this.has=!0,this.val=t},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&(this.has?(t._n(this.val),t._c()):t._e(new Error("last() failed because input stream completed")))},e}(),ma=function(){function e(t,r){this.type="map",this.ins=r,this.out=A,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A},e.prototype._n=function(t){var r=this.out;if(r!==A){var n=Me(this,t,r);n!==A&&r._n(n)}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),va=function(){function e(t){this.type="remember",this.ins=t,this.out=A}return e.prototype._start=function(t){this.out=t,this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=A},e}(),_a=function(){function e(t,r){this.type="replaceError",this.ins=r,this.out=A,this.f=t}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A},e.prototype._n=function(t){var r=this.out;r!==A&&r._n(t)},e.prototype._e=function(t){var r=this.out;if(r!==A)try{this.ins._remove(this),(this.ins=this.f(t))._add(this)}catch(n){r._e(n)}},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),ga=function(){function e(t,r){this.type="startWith",this.ins=t,this.out=A,this.val=r}return e.prototype._start=function(t){this.out=t,this.out._n(this.val),this.ins._add(t)},e.prototype._stop=function(){this.ins._remove(this.out),this.out=A},e}(),ba=function(){function e(t,r){this.type="take",this.ins=r,this.out=A,this.max=t,this.taken=0}return e.prototype._start=function(t){this.out=t,this.taken=0,this.max<=0?t._c():this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=A},e.prototype._n=function(t){var r=this.out;if(r!==A){var n=++this.taken;n<this.max?r._n(t):n===this.max&&(r._n(t),r._c())}},e.prototype._e=function(t){var r=this.out;r!==A&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==A&&t._c()},e}(),Le=function(){function e(t){this._prod=t||A,this._ils=[],this._stopID=A,this._dl=A,this._d=!1,this._target=null,this._err=A}return e.prototype._n=function(t){var r=this._ils,n=r.length;if(this._d&&this._dl._n(t),n==1)r[0]._n(t);else{if(n==0)return;for(var o=jt(r),i=0;i<n;i++)o[i]._n(t)}},e.prototype._e=function(t){if(this._err===A){this._err=t;var r=this._ils,n=r.length;if(this._x(),this._d&&this._dl._e(t),n==1)r[0]._e(t);else{if(n==0)return;for(var o=jt(r),i=0;i<n;i++)o[i]._e(t)}if(!this._d&&n==0)throw this._err}},e.prototype._c=function(){var t=this._ils,r=t.length;if(this._x(),this._d&&this._dl._c(),r==1)t[0]._c();else{if(r==0)return;for(var n=jt(t),o=0;o<r;o++)n[o]._c()}},e.prototype._x=function(){this._ils.length!==0&&(this._prod!==A&&this._prod._stop(),this._err=A,this._ils=[])},e.prototype._stopNow=function(){this._prod._stop(),this._err=A,this._stopID=A},e.prototype._add=function(t){var r=this._target;if(r)return r._add(t);var n=this._ils;if(n.push(t),!(n.length>1))if(this._stopID!==A)clearTimeout(this._stopID),this._stopID=A;else{var o=this._prod;o!==A&&o._start(this)}},e.prototype._remove=function(t){var r=this,n=this._target;if(n)return n._remove(t);var o=this._ils,i=o.indexOf(t);i>-1&&(o.splice(i,1),this._prod!==A&&o.length<=0?(this._err=A,this._stopID=setTimeout(function(){return r._stopNow()})):o.length===1&&this._pruneCycles())},e.prototype._pruneCycles=function(){this._hasNoSinks(this,[])&&this._remove(this._ils[0])},e.prototype._hasNoSinks=function(t,r){if(r.indexOf(t)!==-1)return!0;if(t.out===this)return!0;if(t.out&&t.out!==A)return this._hasNoSinks(t.out,r.concat(t));if(t._ils){for(var n=0,o=t._ils.length;n<o;n++)if(!this._hasNoSinks(t._ils[n],r.concat(t)))return!1;return!0}else return!1},e.prototype.ctor=function(){return this instanceof nt?nt:e},e.prototype.addListener=function(t){t._n=t.next||W,t._e=t.error||W,t._c=t.complete||W,this._add(t)},e.prototype.removeListener=function(t){this._remove(t)},e.prototype.subscribe=function(t){return this.addListener(t),new Qs(this,t)},e.prototype[kt]=function(){return this},e.create=function(t){if(t){if(typeof t.start!="function"||typeof t.stop!="function")throw new Error("producer requires both start and stop functions");Er(t)}return new e(t)},e.createWithMemory=function(t){return t&&Er(t),new nt(t)},e.never=function(){return new e({_start:W,_stop:W})},e.empty=function(){return new e({_start:function(t){t._c()},_stop:W})},e.throw=function(t){return new e({_start:function(r){r._e(t)},_stop:W})},e.from=function(t){if(typeof t[kt]=="function")return e.fromObservable(t);if(typeof t.then=="function")return e.fromPromise(t);if(Array.isArray(t))return e.fromArray(t);throw new TypeError("Type of input to from() must be an Array, Promise, or Observable")},e.of=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.fromArray(t)},e.fromArray=function(t){return new e(new ia(t))},e.fromPromise=function(t){return new e(new sa(t))},e.fromObservable=function(t){if(t.endWhen!==void 0)return t;var r=typeof t[kt]=="function"?t[kt]():t;return new e(new ea(r))},e.periodic=function(t){return new e(new aa(t))},e.prototype._map=function(t){return new(this.ctor())(new ma(t,this))},e.prototype.map=function(t){return this._map(t)},e.prototype.mapTo=function(t){var r=this.map(function(){return t}),n=r._prod;return n.type="mapTo",r},e.prototype.filter=function(t){var r=this._prod;return r instanceof ge?new e(new ge(Zs(r.f,t),r.ins)):new e(new ge(t,this))},e.prototype.take=function(t){return new(this.ctor())(new ba(t,this))},e.prototype.drop=function(t){return new e(new ca(t,this))},e.prototype.last=function(){return new e(new ya(this))},e.prototype.startWith=function(t){return new nt(new ga(this,t))},e.prototype.endWhen=function(t){return new(this.ctor())(new la(t,this))},e.prototype.fold=function(t,r){return new nt(new da(t,r,this))},e.prototype.replaceError=function(t){return new(this.ctor())(new _a(t,this))},e.prototype.flatten=function(){return new e(new ha(this))},e.prototype.compose=function(t){return t(this)},e.prototype.remember=function(){return new nt(new va(this))},e.prototype.debug=function(t){return new(this.ctor())(new ua(this,t))},e.prototype.imitate=function(t){if(t instanceof nt)throw new Error("A MemoryStream was given to imitate(), but it only supports a Stream. Read more about this restriction here: https://github.com/staltz/xstream#faq");this._target=t;for(var r=this._ils,n=r.length,o=0;o<n;o++)t._add(r[o]);this._ils=[]},e.prototype.shamefullySendNext=function(t){this._n(t)},e.prototype.shamefullySendError=function(t){this._e(t)},e.prototype.shamefullySendComplete=function(){this._c()},e.prototype.setDebugListener=function(t){t?(this._d=!0,t._n=t.next||W,t._e=t.error||W,t._c=t.complete||W,this._dl=t):(this._d=!1,this._dl=A)},e.merge=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new ra(r))},e.combine=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new e(new oa(r))},e}();q.Stream=Le;var nt=function(e){Ys(t,e);function t(r){var n=e.call(this,r)||this;return n._has=!1,n}return t.prototype._n=function(r){this._v=r,this._has=!0,e.prototype._n.call(this,r)},t.prototype._add=function(r){var n=this._target;if(n)return n._add(r);var o=this._ils;if(o.push(r),o.length>1){this._has&&r._n(this._v);return}if(this._stopID!==A)this._has&&r._n(this._v),clearTimeout(this._stopID),this._stopID=A;else if(this._has)r._n(this._v);else{var i=this._prod;i!==A&&i._start(this)}},t.prototype._stopNow=function(){this._has=!1,e.prototype._stopNow.call(this)},t.prototype._x=function(){this._has=!1,e.prototype._x.call(this)},t.prototype.map=function(r){return this._map(r)},t.prototype.mapTo=function(r){return e.prototype.mapTo.call(this,r)},t.prototype.take=function(r){return e.prototype.take.call(this,r)},t.prototype.endWhen=function(r){return e.prototype.endWhen.call(this,r)},t.prototype.replaceError=function(r){return e.prototype.replaceError.call(this,r)},t.prototype.remember=function(){return this},t.prototype.debug=function(r){return e.prototype.debug.call(this,r)},t}(Le);q.MemoryStream=nt;var wa=Le;q.default=wa;Object.defineProperty(Kt,"__esModule",{value:!0});Kt.DropRepeatsOperator=void 0;var Sa=q,be={},bn=function(){function e(t,r){this.ins=t,this.type="dropRepeats",this.out=null,this.v=be,this.isEq=r||function(n,o){return n===o}}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.v=be},e.prototype._n=function(t){var r=this.out;if(r){var n=this.v;n!==be&&this.isEq(t,n)||(this.v=t,r._n(t))}},e.prototype._e=function(t){var r=this.out;r&&r._e(t)},e.prototype._c=function(){var t=this.out;t&&t._c()},e}();Kt.DropRepeatsOperator=bn;function Oa(e){return e===void 0&&(e=void 0),function(r){return new Sa.Stream(new bn(r,e))}}var J=Kt.default=Oa;function Aa(e,t,r,n={}){const{switched:o=["DOM"],stateSourceName:i="STATE"}=n,a=typeof t;if(!t)throw new Error("Missing 'name$' parameter for switchable()");if(!(a==="string"||a==="function"||t instanceof V.Stream))throw new Error("Invalid 'name$' parameter for switchable(): expects Stream, String, or Function");if(t instanceof V.Stream){const u=t.compose(J()).startWith(r).remember();return c=>Nr(e,c,u,o)}else{const u=a==="function"&&t||(c=>c[t]);return c=>{const f=c&&(typeof i=="string"&&c[i]||c.STATE||c.state).stream;if(!f instanceof V.Stream)throw new Error(`Could not find the state source: ${i}`);const d=f.map(u).filter(m=>typeof m=="string").compose(J()).startWith(r).remember();return Nr(e,c,d,o,i)}}}function Nr(e,t,r,n=["DOM"],o="STATE"){typeof n=="string"&&(n=[n]);const i=Object.entries(e).map(([u,c])=>{if(t[o]){const f=t[o].stream,d=P.combine(r,f).filter(([_,y])=>_==u).map(([_,y])=>y).remember(),m=new t[o].constructor(d,t[o]._name);return[u,c({...t,state:m})]}return[u,c(t)]});return Object.keys(t).reduce((u,c)=>{if(n.includes(c))u[c]=r.map(f=>{const d=i.find(([m,_])=>m===f);return d&&d[1][c]||P.never()}).flatten().remember().startWith(void 0);else{const f=i.filter(([d,m])=>m[c]!==void 0).map(([d,m])=>m[c]);u[c]=P.merge(...f)}return u},{})}var wn={};Object.defineProperty(wn,"__esModule",{value:!0});var $a=q,Ca=function(){function e(t,r){this.dt=t,this.ins=r,this.type="delay",this.out=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null},e.prototype._n=function(t){var r=this.out;if(r)var n=setInterval(function(){r._n(t),clearInterval(n)},this.dt)},e.prototype._e=function(t){var r=this.out;if(r)var n=setInterval(function(){r._e(t),clearInterval(n)},this.dt)},e.prototype._c=function(){var t=this.out;if(t)var r=setInterval(function(){t._c(),clearInterval(r)},this.dt)},e}();function Ea(e){return function(r){return new $a.Stream(new Ca(e,r))}}var we=wn.default=Ea,Sn={};Object.defineProperty(Sn,"__esModule",{value:!0});var Na=q,Pa=function(){function e(t){this.streams=t,this.type="concat",this.out=null,this.i=0}return e.prototype._start=function(t){this.out=t,this.streams[this.i]._add(this)},e.prototype._stop=function(){var t=this.streams;this.i<t.length&&t[this.i]._remove(this),this.i=0,this.out=null},e.prototype._n=function(t){var r=this.out;r&&r._n(t)},e.prototype._e=function(t){var r=this.out;r&&r._e(t)},e.prototype._c=function(){var t=this.out;if(t){var r=this.streams;r[this.i]._remove(this),++this.i<r.length?r[this.i]._add(this):t._c()}},e}();function xa(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Na.Stream(new Pa(e))}var Se=Sn.default=xa,On={};Object.defineProperty(On,"__esModule",{value:!0});var Et=q,Ia=function(){function e(t,r){this.dt=t,this.ins=r,this.type="debounce",this.out=null,this.id=null,this.t=Et.NO}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.clearInterval()},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;n&&(this.clearInterval(),this.t=t,this.id=setInterval(function(){r.clearInterval(),n._n(t),r.t=Et.NO},this.dt))},e.prototype._e=function(t){var r=this.out;r&&(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;t&&(this.clearInterval(),this.t!=Et.NO&&t._n(this.t),this.t=Et.NO,t._c())},e}();function Da(e){return function(r){return new Et.Stream(new Ia(e,r))}}var Tt=On.default=Da;const Pr=typeof window<"u"&&window||process&&Zi||{},xr="BOOTSTRAP",st="INITIALIZE",ka="HYDRATE",At="PARENT",Ta="CHILD";let Ma=0;const Ir="~#~#~ABORT~#~#~";function Ft(e){const{name:t,sources:r,isolateOpts:n,stateSourceName:o="STATE"}=e;if(r&&!L(r))throw new Error("Sources must be a Cycle.js sources object:",t);let i;typeof n=="string"?i={[o]:n}:n===!0?i={}:i=n;const a=typeof r>"u";let u;if(L(i)){const c=f=>{const d={...e,sources:f};return new Oe(d).sinks};u=a?it(c,i):it(c,i)(r)}else u=a?c=>new Oe({...e,sources:c}).sinks:new Oe(e).sinks;return u.componentName=t,u.isSygnalComponent=!0,u}class Oe{constructor({name:t="NO NAME",sources:r,intent:n,model:o,hmrActions:i,context:a,response:u,view:c,peers:f={},components:d={},initialState:m,calculated:_,storeCalculatedInState:y=!0,DOMSourceName:h="DOM",stateSourceName:v="STATE",requestSourceName:g="HTTP",debug:b=!1}){if(!r||!L(r))throw new Error("Missing or invalid sources");this.name=t,this.sources=r,this.intent=n,this.model=o,this.hmrActions=i,this.context=a,this.response=u,this.view=c,this.peers=f,this.components=d,this.initialState=m,this.calculated=_,this.storeCalculatedInState=y,this.DOMSourceName=h,this.stateSourceName=v,this.requestSourceName=g,this.sourceNames=Object.keys(r),this._debug=b,this.isSubComponent=this.sourceNames.includes("props$");const C=r[v]&&r[v].stream;C&&(this.currentState=m||{},this.sources[v]=new $t(C.map(E=>(this.currentState=E,E))));const O=r.props$;O&&(this.sources.props$=O.map(E=>{const{sygnalFactory:x,sygnalOptions:N,...D}=E;return this.currentProps=D,E}));const w=r.children$;w&&(this.sources.children$=w.map(E=>(this.currentChildren=E,E))),!this.isSubComponent&&typeof this.intent>"u"&&typeof this.model>"u"&&(this.initialState=m||!0,this.intent=E=>({__NOOP_ACTION__:P.never()}),this.model={__NOOP_ACTION__:E=>E});const $=Ma++;this.addCalculated=this.createMemoizedAddCalculated(),this.log=La(`${$} | ${t}`),this.initChildSources$(),this.initIntent$(),this.initHmrActions(),this.initAction$(),this.initState(),this.initContext(),this.initModel$(),this.initPeers$(),this.initSubComponentSink$(),this.initSubComponentsRendered$(),this.initVdom$(),this.initSinks(),this.sinks.__index=$,this.log("Instantiated",!0)}get debug(){return this._debug||Pr.SYGNAL_DEBUG==="true"||Pr.SYGNAL_DEBUG===!0}initIntent$(){if(this.intent){if(typeof this.intent!="function")throw new Error("Intent must be a function");if(this.intent$=this.intent(this.sources),!(this.intent$ instanceof V.Stream)&&!L(this.intent$))throw new Error("Intent must return either an action$ stream or map of event streams")}}initHmrActions(){if(typeof this.hmrActions>"u"){this.hmrAction$=P.of().filter(t=>!1);return}if(typeof this.hmrActions=="string"&&(this.hmrActions=[this.hmrActions]),!Array.isArray(this.hmrActions))throw new Error(`[${this.name}] hmrActions must be the name of an action or an array of names of actions to run when a component is hot-reloaded`);if(this.hmrActions.some(t=>typeof t!="string"))throw new Error(`[${this.name}] hmrActions must be the name of an action or an array of names of actions to run when a component is hot-reloaded`);this.hmrAction$=P.fromArray(this.hmrActions.map(t=>({type:t})))}initAction$(){const t=this.sources&&this.sources[this.requestSourceName]||null;if(!this.intent$){this.action$=P.never();return}let r;if(this.intent$ instanceof V.Stream)r=this.intent$;else{const f=Object.entries(this.intent$).map(([d,m])=>m.map(_=>({type:d,data:_})));r=P.merge(P.never(),...f)}const n=r instanceof V.Stream?r:r.apply&&r(this.sources)||P.never(),o=P.of({type:xr}).compose(we(10)),i=(window==null?void 0:window.__SYGNAL_HMR_UPDATING)===!0?this.hmrAction$:P.of().filter(f=>!1),a=this.model[xr]&&(window==null?void 0:window.__SYGNAL_HMR_UPDATING)!==!0?Se(o,n):Se(P.of().compose(we(1)).filter(f=>!1),i,n);let u;(window==null?void 0:window.__SYGNAL_HMR_UPDATING)!==!0&&t&&typeof t.select=="function"?u=t.select("initial").flatten():u=P.never();const c=u.map(f=>({type:ka,data:f}));this.action$=P.merge(a,c).compose(this.log(({type:f})=>`<${f}> Action triggered`))}initState(){this.model!==void 0&&(this.model[st]===void 0?this.model[st]={[this.stateSourceName]:(t,r)=>({...this.addCalculated(r)})}:L(this.model[st])&&Object.keys(this.model[st]).forEach(t=>{t!==this.stateSourceName&&(console.warn(`${st} can only be used with the ${this.stateSourceName} source... disregarding ${t}`),delete this.model[st][t])}))}initContext(){var n,o;if(!this.context&&!this.sources.__parentContext$){this.context$=P.of({});return}const t=((n=this.sources[this.stateSourceName])==null?void 0:n.stream.startWith({}).compose(J(X)))||P.never(),r=((o=this.sources.__parentContext$)==null?void 0:o.startWith({}).compose(J(X)))||P.of({});this.context&&!L(this.context)&&console.error(`[${this.name}] Context must be an object mapping names to values of functions: ignoring provided ${typeof this.context}`),this.context$=P.combine(t,r).map(([i,a])=>{const u=L(a)?a:{},c=L(this.context)?this.context:{},f=this.currentState,d=Object.entries(c).reduce((_,y)=>{const[h,v]=y;let g;const b=typeof v;if(b==="string")g=f[v];else if(b==="boolean")g=f[h];else if(b==="function")g=v(f);else return console.error(`[${this.name}] Invalid context entry '${h}': must be the name of a state property or a function returning a value to use`),_;return _[h]=g,_},{}),m={...u,...d};return this.currentContext=m,m}).compose(J(X)).startWith({}),this.context$.subscribe({next:i=>i})}initModel$(){if(typeof this.model>"u"){this.model$=this.sourceNames.reduce((c,f)=>(c[f]=P.never(),c),{});return}const t={type:st,data:this.initialState};this.isSubComponent&&this.initialState&&console.warn(`[${this.name}] Initial state provided to sub-component. This will overwrite any state provided by the parent component.`);const r=this.initialState&&(window==null?void 0:window.__SYGNAL_HMR_UPDATING)!==!0?Se(P.of(t),this.action$).compose(we(0)):this.action$,n=()=>this.makeOnAction(r,!0,this.action$),o=()=>this.makeOnAction(this.action$,!1,this.action$),i=Object.entries(this.model),a={};i.forEach(c=>{let[f,d]=c;if(typeof d=="function"&&(d={[this.stateSourceName]:d}),!L(d))throw new Error(`Entry for each action must be an object: ${this.name} ${f}`);Object.entries(d).forEach(_=>{const[y,h]=_,v=y===this.stateSourceName,g=y===At,b=v?n():o(),O=(g?b(f,h).map(w=>({name:this.name,value:w})):b(f,h)).compose(this.log(w=>{if(v)return`<${f}> State reducer added`;if(g)return`<${f}> Data sent to parent component: ${JSON.stringify(w.value).replaceAll('"',"")}`;{const $=w&&(w.type||w.command||w.name||w.key||Array.isArray(w)&&"Array"||w);return`<${f}> Data sent to [${y}]: ${JSON.stringify($).replaceAll('"',"")}`}}));Array.isArray(a[y])?a[y].push(O):a[y]=[O]})});const u=Object.entries(a).reduce((c,f)=>{const[d,m]=f;return c[d]=P.merge(P.never(),...m),c},{});this.model$=u}initPeers$(){const t=this.sourceNames.reduce((r,n)=>(n==this.DOMSourceName?r[n]={}:r[n]=[],r),{});this.peers$=Object.entries(this.peers).reduce((r,[n,o])=>{const i=o(this.sources);return this.sourceNames.forEach(a=>{a==this.DOMSourceName?r[a][n]=i[a]:r[a].push(i[a])}),r},t)}initChildSources$(){let t;const r=P.create({start:n=>{t=n.next.bind(n)},stop:n=>{}}).map(n=>P.merge(...n)).flatten();this.sources[Ta]={select:n=>{const o=r;return(n?o.filter(u=>u.name===n):o).map(u=>u.value)}},this.newChildSources=n=>{typeof t=="function"&&t(n)}}initSubComponentSink$(){const t=P.create({start:r=>{this.newSubComponentSinks=r.next.bind(r)},stop:r=>{}});t.subscribe({next:r=>r}),this.subComponentSink$=t.filter(r=>Object.keys(r).length>0)}initSubComponentsRendered$(){const t=P.create({start:r=>{this.triggerSubComponentsRendered=r.next.bind(r)},stop:r=>{}});this.subComponentsRendered$=t.startWith(null)}initVdom$(){if(typeof this.view!="function"){this.vdom$=P.of(null);return}const t=this.collectRenderParameters();this.vdom$=t.map(r=>{const{props:n,state:o,children:i,context:a,...u}=r,{sygnalFactory:c,sygnalOptions:f,...d}=n||{};return this.view({...d,state:o,children:i,context:a,peers:u},o,a,u)}).compose(this.log("View rendered")).map(r=>r||{sel:"div",data:{},children:[]}).compose(this.instantiateSubComponents.bind(this)).filter(r=>r!==void 0).compose(this.renderVdom.bind(this))}initSinks(){this.sinks=this.sourceNames.reduce((t,r)=>{if(r==this.DOMSourceName)return t;const n=this.subComponentSink$&&r!==At?this.subComponentSink$.map(o=>o[r]).filter(o=>!!o).flatten():P.never();return r===this.stateSourceName?t[r]=P.merge(this.model$[r]||P.never(),n,this.sources[this.stateSourceName].stream.filter(o=>!1),...this.peers$[r]||[]):t[r]=P.merge(this.model$[r]||P.never(),n,...this.peers$[r]||[]),t},{}),this.sinks[this.DOMSourceName]=this.vdom$,this.sinks[At]=this.model$[At]||P.never()}makeOnAction(t,r=!0,n){return n=n||t,(o,i)=>{const a=t.filter(({type:c})=>c==o);let u;if(typeof i=="function")u=a.map(c=>{const f=(_,y,h=10)=>{if(typeof h!="number")throw new Error(`[${this.name} ] Invalid delay value provided to next() function in model action '${o}'. Must be a number in ms.`);setTimeout(()=>{n.shamefullySendNext({type:_,data:y})},h),this.log(`<${o}> Triggered a next() action: <${_}> ${h}ms delay`,!0)},d={...this.currentProps,children:this.currentChildren,context:this.currentContext};let m=c.data;if(r)return _=>{const y=this.isSubComponent?this.currentState:_,h=this.addCalculated(y);d.state=h;const v=i(h,m,f,d);return v==Ir?y:this.cleanupCalculated(v)};{const _=this.addCalculated(this.currentState);d.state=_;const y=i(_,m,f,d),h=typeof y;if(L(y)||["string","number","boolean","function"].includes(h))return y;if(h=="undefined")return console.warn(`'undefined' value sent to ${o}`),y;throw new Error(`Invalid reducer type for ${o} ${h}`)}}).filter(c=>c!=Ir);else if(i===void 0||i===!0)u=a.map(({data:c})=>c);else{const c=i;u=a.mapTo(c)}return u}}createMemoizedAddCalculated(){let t,r;return function(n){if(!this.calculated||!L(n)||Array.isArray(n))return n;if(n===t)return r;if(!L(this.calculated))throw new Error("'calculated' parameter must be an object mapping calculated state field named to functions");const o=this.getCalculatedValues(n);if(!o)return t=n,r=n,n;const i={...n,...o};return t=n,r=i,i}}getCalculatedValues(t){const r=Object.entries(this.calculated||{});if(r.length!==0)return r.reduce((n,[o,i])=>{if(typeof i!="function")throw new Error(`Missing or invalid calculator function for calculated field '${o}`);try{n[o]=i(t)}catch(a){console.warn(`Calculated field '${o}' threw an error during calculation: ${a.message}`)}return n},{})}cleanupCalculated(t){if(!t||!L(t)||Array.isArray(t))return t;const n={...this.storeCalculatedInState?this.addCalculated(t):t};return!this.calculated||this.storeCalculatedInState||Object.keys(this.calculated).forEach(i=>{this.initialState&&typeof this.initialState[i]<"u"?n[i]=this.initialState[i]:delete n[i]}),n}collectRenderParameters(){const t=this.sources[this.stateSourceName],r={...this.peers$[this.DOMSourceName]},n=t&&t.isolateSource(t,{get:c=>this.addCalculated(c)}),o=n&&n.stream||P.never();r.state=o.compose(J(X)),this.sources.props$&&(r.props=this.sources.props$.compose(J(ja))),this.sources.children$&&(r.children=this.sources.children$.compose(J(X))),this.context$&&(r.context=this.context$.compose(J(X)));const i=[],a=[];return Object.entries(r).forEach(([c,f])=>{i.push(c),a.push(f)}),P.combine(...a).compose(Tt(1)).map(c=>i.reduce((d,m,_)=>(d[m]=c[_],m==="state"&&(d[this.stateSourceName]=c[_],d.calculated=c[_]&&this.getCalculatedValues(c[_])||{}),d),{}))}instantiateSubComponents(t){return t.fold((r,n)=>{const o=Object.keys(this.components),i=An(n,o),a=Object.entries(i),u={"::ROOT::":n};if(a.length===0)return u;const c={},f=[];let d=0;const m=a.reduce((y,[h,v])=>{const g=v.data,b=g.props||{},C=v.children||[],O=g.isCollection||!1,w=g.isSwitchable||!1,$=T=>{Object.entries(T).forEach(([M,F])=>{c[M]||(c[M]=[]),M===At?f.push(F):M!==this.DOMSourceName&&c[M].push(F)})};if(r[h]){const T=r[h];return y[h]=T,T.props$.shamefullySendNext(b),T.children$.shamefullySendNext(C),$(T.sink$),y}const E=P.create().startWith(b),x=P.create().startWith(C);let N;O?N=this.instantiateCollection.bind(this):w?N=this.instantiateSwitchable.bind(this):N=this.instantiateCustomComponent.bind(this),d++;const D=N(v,E,x);return D[this.DOMSourceName]=D[this.DOMSourceName]?this.makeCoordinatedSubComponentDomSink(D[this.DOMSourceName]):P.never(),y[h]={sink$:D,props$:E,children$:x},$(D),y},u),_=Object.entries(c).reduce((y,[h,v])=>(v.length===0||(y[h]=v.length===1?v[0]:P.merge(...v)),y),{});return this.newSubComponentSinks(_),this.newChildSources(f),d>0&&this.log(`New sub components instantiated: ${d}`,!0),m},{})}makeCoordinatedSubComponentDomSink(t){const r=t.remember();return this.sources[this.stateSourceName].stream.compose(J(X)).map(o=>r).flatten().debug(o=>this.triggerSubComponentsRendered()).remember()}instantiateCollection(t,r,n){const i=t.data.props||{};let a=typeof i.filter=="function"?i.filter:void 0,u=kr(i.sort);const c={filter:a,sort:u},f=P.combine(this.sources[this.stateSourceName].stream.startWith(this.currentState),r.startWith(i)).compose(Tt(1)).map(([O,w])=>(w.filter!==c.filter&&(c.filter=typeof w.filter=="function"?w.filter:void 0),w.sort!==c.sort&&(c.sort=kr(w.sort)),L(O)?this.addCalculated(O):O)),d=new $t(f),m=i.from,_=i.of,y=i.idfield||"id";let h,v;if(typeof _=="function")if(_.isSygnalComponent)v=_;else{const O=_.componentName||_.label||_.name||"FUNCTION_COMPONENT",w=_,{model:$,intent:E,hmrActions:x,context:N,peers:D,components:T,initialState:M,calculated:F,storeCalculatedInState:R,DOMSourceName:K,stateSourceName:tt,debug:bt}=_;v=Ft({name:O,view:w,model:$,intent:E,hmrActions:x,context:N,peers:D,components:T,initialState:M,calculated:F,storeCalculatedInState:R,DOMSourceName:K,stateSourceName:tt,debug:bt})}else if(this.components[_])v=this.components[_];else throw new Error(`[${this.name}] Invalid 'of' propery in collection: ${_}`);const g={get:O=>{if(!Array.isArray(O[m]))return[];const w=O[m],$=typeof c.filter=="function"?w.filter(c.filter):w;return(c.sort,$.sort(c.sort)).map((N,D)=>L(N)?{...N,[y]:N[y]||D}:{value:N,[y]:D})},set:(O,w)=>{if(this.calculated&&m in this.calculated)return console.warn(`Collection sub-component of ${this.name} attempted to update state on a calculated field '${m}': Update ignored`),O;const $=[];for(const E of O[m].map((x,N)=>L(x)?{...x,[y]:x[y]||N}:{__primitive:!0,value:x,[y]:N}))if(typeof c.filter=="function"&&!c.filter(E))$.push(E.__primitive?E.value:E);else{const x=w.find(N=>N[y]===E[y]);typeof x<"u"&&$.push(E.__primitive?x.value:x)}return{...O,[m]:$}}};m===void 0?h={get:O=>!(O instanceof Array)&&O.value&&O.value instanceof Array?O.value:O,set:(O,w)=>w}:typeof m=="string"?L(this.currentState)?!(this.currentState&&m in this.currentState)&&!(this.calculated&&m in this.calculated)?(console.error(`Collection component in ${this.name} is attempting to use non-existent state property '${m}': To fix this error, specify a valid array property on the state.  Attempting to use parent component state.`),h=void 0):(Array.isArray(this.currentState[m])||console.warn(`State property '${m}' in collection comopnent of ${this.name} is not an array: No components will be instantiated in the collection.`),h=g):(Array.isArray(this.currentState[m])||console.warn(`State property '${m}' in collection component of ${this.name} is not an array: No components will be instantiated in the collection.`),h=g):L(m)?typeof m.get!="function"?(console.error(`Collection component in ${this.name} has an invalid 'from' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting child state from the current state. Attempting to use parent component state.`),h=void 0):h={get:O=>{const w=m.get(O);return Array.isArray(w)?w:(console.warn(`State getter function in collection component of ${this.name} did not return an array: No components will be instantiated in the collection. Returned value:`,w),[])},set:m.set}:(console.error(`Collection component in ${this.name} has an invalid 'from' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting child state from the current state. Attempting to use parent component state.`),h=void 0);const b={...this.sources,[this.stateSourceName]:d,props$:r,children$:n,__parentContext$:this.context$,PARENT:null},C=Qi(v,h,{container:null})(b);if(!L(C))throw new Error("Invalid sinks returned from component factory of collection element");return C}instantiateSwitchable(t,r,n){const i=t.data.props||{},a=this.sources[this.stateSourceName].stream.startWith(this.currentState).map(g=>L(g)?this.addCalculated(g):g),u=new $t(a),c=i.state;let f;const d={get:g=>g[c],set:(g,b)=>this.calculated&&c in this.calculated?(console.warn(`Switchable sub-component of ${this.name} attempted to update state on a calculated field '${c}': Update ignored`),g):!L(b)||Array.isArray(b)?{...g,[c]:b}:{...g,[c]:b}},m={get:g=>g,set:(g,b)=>b};typeof c>"u"?f=m:typeof c=="string"?f=d:L(c)?typeof c.get!="function"?(console.error(`Switchable component in ${this.name} has an invalid 'state' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting sub-component state from the current state. Attempting to use parent component state.`),f=m):f={get:c.get,set:c.set}:(console.error(`Invalid state provided to switchable sub-component of ${this.name}: Expecting string, object, or undefined, but found ${typeof c}. Attempting to use parent component state.`),f=m);const _=i.of;Object.keys(_).forEach(g=>{const b=_[g];if(!b.isSygnalComponent){const C=b.componentName||b.label||b.name||"FUNCTION_COMPONENT",O=b,{model:w,intent:$,hmrActions:E,context:x,peers:N,components:D,initialState:T,calculated:M,storeCalculatedInState:F,DOMSourceName:R,stateSourceName:K,debug:tt}=b,bt={name:C,view:O,model:w,intent:$,hmrActions:E,context:x,peers:N,components:D,initialState:T,calculated:M,storeCalculatedInState:F,DOMSourceName:R,stateSourceName:K,debug:tt};_[g]=Ft(bt)}});const h={...this.sources,[this.stateSourceName]:u,props$:r,children$:n,__parentContext$:this.context$},v=it(Aa(_,r.map(g=>g.current)),{[this.stateSourceName]:f})(h);if(!L(v))throw new Error("Invalid sinks returned from component factory of switchable element");return v}instantiateCustomComponent(t,r,n){const o=t.sel,a=t.data.props||{},u=this.sources[this.stateSourceName].stream.startWith(this.currentState).map(g=>L(g)?this.addCalculated(g):g),c=new $t(u),f=a.state;typeof a.sygnalFactory!="function"&&L(a.sygnalOptions)&&(a.sygnalFactory=Ft(a.sygnalOptions));const d=o==="sygnal-factory"?a.sygnalFactory:this.components[o]||a.sygnalFactory;if(!d)throw o==="sygnal-factory"?new Error("Component not found on element with Capitalized selector and nameless function: JSX transpilation replaces selectors starting with upper case letters with functions in-scope with the same name, Sygnal cannot see the name of the resulting component."):new Error(`Component not found: ${o}`);let m;const _={get:g=>g[f],set:(g,b)=>this.calculated&&f in this.calculated?(console.warn(`Sub-component of ${this.name} attempted to update state on a calculated field '${f}': Update ignored`),g):{...g,[f]:b}},y={get:g=>g,set:(g,b)=>b};typeof f>"u"?m=y:typeof f=="string"?m=_:L(f)?typeof f.get!="function"?(console.error(`Sub-component in ${this.name} has an invalid 'state' field: Expecting 'undefined', a string indicating an array property in the state, or an object with 'get' and 'set' functions for retrieving and setting sub-component state from the current state. Attempting to use parent component state.`),m=y):m={get:f.get,set:f.set}:(console.error(`Invalid state provided to sub-component of ${this.name}: Expecting string, object, or undefined, but found ${typeof f}. Attempting to use parent component state.`),m=y);const h={...this.sources,[this.stateSourceName]:c,props$:r,children$:n,__parentContext$:this.context$},v=it(d,{[this.stateSourceName]:m})(h);if(!L(v)){const g=o==="sygnal-factory"?"custom element":o;throw new Error("Invalid sinks returned from component factory:",g)}return v}renderVdom(t){return P.combine(this.subComponentsRendered$,t).compose(Tt(1)).map(([r,n])=>{const o=Object.keys(this.components),i=n["::ROOT::"],a=Object.entries(n).filter(([f])=>f!=="::ROOT::");if(a.length===0)return P.of(i);const u=[],c=a.map(([f,d])=>(u.push(f),d.sink$[this.DOMSourceName].startWith(void 0)));return c.length===0?P.of(i):P.combine(...c).compose(Tt(1)).map(f=>{const d=f.reduce((y,h,v)=>(y[u[v]]=h,y),{}),m=En(i);return $n(m,d,o)})}).flatten().filter(r=>!!r).remember()}}function La(e){return function(t,r=!1){const n=typeof t=="function"?t:o=>t;if(r){this.debug&&console.log(`[${e}] ${n(t)}`);return}else return o=>o.debug(i=>{this.debug&&console.log(`[${e}] ${n(i)}`)})}}function An(e,t,r=0,n=0,o){var y,h,v,g,b,C;if(!e)return{};if((y=e.data)!=null&&y.componentsProcessed)return{};r===0&&(e.data.componentsProcessed=!0);const i=e.sel,a=i&&i.toLowerCase()==="collection",u=i&&i.toLowerCase()==="switchable",c=i&&["collection","switchable","sygnal-factory",...t].includes(i)||typeof((v=(h=e.data)==null?void 0:h.props)==null?void 0:v.sygnalFactory)=="function"||L((b=(g=e.data)==null?void 0:g.props)==null?void 0:b.sygnalOptions),f=e.data&&e.data.props||{};e.data&&e.data.attrs;const d=e.children||[];let m={},_=o;if(c){if(_=Cn(e,r,n,o),a){if(!f.of)throw new Error("Collection element missing required 'component' property");if(typeof f.of!="string"&&typeof f.of!="function")throw new Error(`Invalid 'component' property of collection element: found ${typeof f.of} requires string or component factory function`);if(typeof f.of!="function"&&!t.includes(f.of))throw new Error(`Specified component for collection not found: ${f.of}`);typeof f.from<"u"&&!(typeof f.from=="string"||Array.isArray(f.from)||typeof f.from.get=="function")&&console.warn(`No valid array found for collection ${typeof f.of=="string"?f.of:"function component"}: no collection components will be created`,f.from),e.data.isCollection=!0,(C=e.data).props||(C.props={})}else if(u){if(!f.of)throw new Error("Switchable element missing required 'of' property");if(!L(f.of))throw new Error(`Invalid 'of' property of switchable element: found ${typeof f.of} requires object mapping names to component factories`);if(!Object.values(f.of).every($=>typeof $=="function"))throw new Error("One or more components provided to switchable element is not a valid component factory");if(!f.current||typeof f.current!="string"&&typeof f.current!="function")throw new Error(`Missing or invalid 'current' property for switchable element: found '${typeof f.current}' requires string or function`);if(!Object.keys(f.of).includes(f.current))throw new Error(`Component '${f.current}' not found in switchable element`);e.data.isSwitchable=!0}typeof f.key>"u"&&(e.data.props.key=_),m[_]=e}return d.length>0&&d.map((O,w)=>An(O,t,r+1,n+w,_)).forEach(O=>{Object.entries(O).forEach(([w,$])=>m[w]=$)}),m}function $n(e,t,r,n=0,o=0,i){var _,y,h,v,g,b,C;if(!e)return;if((_=e.data)!=null&&_.componentsInjected)return e;n===0&&e.data&&(e.data.componentsInjected=!0);const a=e.sel||"NO SELECTOR",u=["collection","switchable","sygnal-factory",...r].includes(a)||typeof((h=(y=e.data)==null?void 0:y.props)==null?void 0:h.sygnalFactory)=="function"||L((g=(v=e.data)==null?void 0:v.props)==null?void 0:g.sygnalOptions),c=(b=e==null?void 0:e.data)==null?void 0:b.isCollection,f=(C=e==null?void 0:e.data)==null?void 0:C.isSwitchable;e.data&&e.data.props;const d=e.children||[];let m=i;if(u){m=Cn(e,n,o,i);const O=t[m];return c?(e.sel="div",e.children=Array.isArray(O)?O:[O],e):O}else return d.length>0&&(e.children=d.map((O,w)=>$n(O,t,r,n+1,o+w,m)).flat()),e}function Cn(e,t,r,n){var m;const o=e.sel,i=typeof o=="string"?o:"functionComponent",a=`${t}:${r}`,u=((m=e.data)==null?void 0:m.props)||{},c=u.id&&JSON.stringify(u.id).replaceAll('"',"")||a;return`${n?`${n}|`:""}${i}::${c}`}function En(e){return typeof e>"u"?e:{...e,children:Array.isArray(e.children)?e.children.map(En):void 0,data:e.data&&{...e.data,componentsInjected:!1}}}function ja(e,t){return X(Fa(e))}function X(e,t,r=5,n=0){if(n>r)return!1;if(e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(!X(e[a],t[a],r,n+1))return!1;return!0}const o=Object.keys(e),i=Object.keys(t);if(o.length!==i.length)return!1;for(const a of o)if(!i.includes(a)||!X(e[a],t[a],r,n+1))return!1;return!0}function Fa(e){if(!L(e))return e;const{state:t,of:r,from:n,filter:o,...i}=e;return i}function L(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Rt(e,t,r=!0){const n=r?1:-1;switch(!0){case e>t:return 1*n;case e<t:return-1*n;default:return 0}}function Dr(e){const t=Object.entries(e);if(t.length>1){console.error("Sort objects can only have one key:",e);return}const r=t[0],[n,o]=r;if(!["string","number"].includes(typeof o)){console.error("Sort object properties must be a string or number:",e);return}let i=!0;if(typeof o=="string"){if(!["asc","dec"].includes(o.toLowerCase())){console.error("Sort object string values must be asc or dec:",e);return}i=o.toLowerCase()==="asc"}if(typeof o=="number"){if(o!==1&&o!==-1){console.error("Sort object number values must be 1 or -1:",e);return}i=o===1}return(a,u)=>Rt(a[n],u[n],i)}function kr(e){if(!e)return;const t=typeof e;if(t==="function")return e;if(t==="string"){if(e.toLowerCase()==="asc"||e.toLowerCase()==="dec"){const n=e.toLowerCase()==="asc";return(o,i)=>Rt(o,i,n)}const r=e;return(n,o)=>Rt(n[r],o[r],!0)}else if(Array.isArray(e)){const r=e.map(n=>{if(typeof n=="function")return n;if(typeof n=="string"&&!["asc","dec"].includes(n.toLowerCase()))return(o,i)=>Rt(o[n],i[n],!0);if(L(n))return Dr(n)});return(n,o)=>r.filter(i=>typeof i=="function").reduce((i,a)=>i!==0?i:a(n,o),0)}else{if(L(e))return Dr(e);console.error("Invalid sort option (ignoring):",item);return}}var je={};Object.defineProperty(je,"__esModule",{value:!0});function Nn(){var e;return typeof window<"u"?e=window:typeof z<"u"?e=z:e=this,e.Cyclejs=e.Cyclejs||{},e=e.Cyclejs,e.adaptStream=e.adaptStream||function(t){return t},e}function Ra(e){Nn().adaptStream=e}je.setAdapt=Ra;function Ba(e){return Nn().adaptStream(e)}var Wa=je.adapt=Ba;function qa(e){const t=new EventTarget;return e.subscribe({next:r=>t.dispatchEvent(new CustomEvent("data",{detail:r}))}),{select:r=>{const n=!r,o=Array.isArray(r)?r:[r];let i;const a=P.create({start:u=>{i=({detail:c})=>{const f=c&&c.data||null;(n||o.includes(c.type))&&u.next(f)},t.addEventListener("data",i)},stop:u=>t.removeEventListener("data",i)});return Wa(a)}}}function Ga(e){e.addListener({next:t=>{console.log(t)}})}function Pn(e,t={},r={}){const{mountPoint:n="#root",fragments:o=!0,useDefaultDrivers:i=!0}=r;if(!e.isSygnalComponent){const v=e.name||e.componentName||e.label||"FUNCTIONAL_COMPONENT",g=e,{model:b,intent:C,hmrActions:O,context:w,peers:$,components:E,initialState:x,calculated:N,storeCalculatedInState:D,DOMSourceName:T,stateSourceName:M,debug:F}=e;e=Ft({name:v,view:g,model:b,intent:C,hmrActions:O,context:w,peers:$,components:E,initialState:x,calculated:N,storeCalculatedInState:D,DOMSourceName:T,stateSourceName:M,debug:F})}const a=$o(e,"STATE"),c={...i?{EVENTS:qa,DOM:Li(n,{snabbdomOptions:{experimental:{fragments:o}}}),LOG:Ga}:{},...t},{sources:f,sinks:d,run:m}=Ji(a,c),_=m(),y={sources:f,sinks:d,dispose:_},h=v=>{y.sinks.STATE.shamefullySendNext(g=>{window.__SYGNAL_HMR_UPDATING=!0,y.dispose();const b=v.default;b.initialState=g;const C=Pn(b,t);return y.sources=C.sources,y.sinks=C.sinks,y.dispose=C.dispose,C.sinks.STATE.shamefullySendNext(()=>({...g})),C.sources.STATE.stream.setDebugListener({next:()=>{y.sources.STATE.stream.setDebugListener(null),setTimeout(()=>{window.__SYGNAL_HMR_UPDATING=!1},100)}}),ABORT})};return y.hmr=h,y}function Ua(...e){return e.reduce((t,r)=>(typeof r=="string"&&!t.includes(r)?t.push(...In(r)):Array.isArray(r)?t.push(...Ha(r)):typeof r=="object"&&t.push(...za(r)),t),[]).join(" ")}function xn(e){return/^[a-zA-Z0-9-_]+$/.test(e)}function In(e){if(typeof e!="string")throw new Error("Class name must be a string");return e.trim().split(" ").reduce((t,r)=>{if(r.trim().length===0)return t;if(!xn(r))throw new Error(`${r} is not a valid CSS class name`);return t.push(r),t},[])}function Ha(e){return e.map(In).flat()}function za(e){return Object.entries(e).filter(([r,n])=>typeof n=="function"?n():!!n).map(([r,n])=>{const o=r.trim();if(!xn(o))throw new Error(`${o} is not a valid CSS class name`);return o})}var Dn={};Object.defineProperty(Dn,"__esModule",{value:!0});var Va=q,Ka=function(){function e(t,r){this.dt=t,this.ins=r,this.type="throttle",this.out=null,this.id=null}return e.prototype._start=function(t){this.out=t,this.ins._add(this)},e.prototype._stop=function(){this.ins._remove(this),this.out=null,this.id=null},e.prototype.clearInterval=function(){var t=this.id;t!==null&&clearInterval(t),this.id=null},e.prototype._n=function(t){var r=this,n=this.out;n&&(this.id||(n._n(t),this.id=setInterval(function(){r.clearInterval()},this.dt)))},e.prototype._e=function(t){var r=this.out;r&&(this.clearInterval(),r._e(t))},e.prototype._c=function(){var t=this.out;t&&(this.clearInterval(),t._c())},e}();function Ya(e){return function(r){return new Va.Stream(new Ka(e,r))}}Dn.default=Ya;var _t={},Ja=z&&z.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)n[o]=i[a];return n};Object.defineProperty(_t,"__esModule",{value:!0});_t.SampleCombineOperator=_t.SampleCombineListener=void 0;var Xa=q,ot={},kn=function(){function e(t,r){this.i=t,this.p=r,r.ils[t]=this}return e.prototype._n=function(t){var r=this.p;r.out!==ot&&r.up(t,this.i)},e.prototype._e=function(t){this.p._e(t)},e.prototype._c=function(){this.p.down(this.i,this)},e}();_t.SampleCombineListener=kn;var Tn=function(){function e(t,r){this.type="sampleCombine",this.ins=t,this.others=r,this.out=ot,this.ils=[],this.Nn=0,this.vals=[]}return e.prototype._start=function(t){this.out=t;for(var r=this.others,n=this.Nn=r.length,o=this.vals=new Array(n),i=0;i<n;i++)o[i]=ot,r[i]._add(new kn(i,this));this.ins._add(this)},e.prototype._stop=function(){var t=this.others,r=t.length,n=this.ils;this.ins._remove(this);for(var o=0;o<r;o++)t[o]._remove(n[o]);this.out=ot,this.vals=[],this.ils=[]},e.prototype._n=function(t){var r=this.out;r!==ot&&(this.Nn>0||r._n(Ja([t],this.vals)))},e.prototype._e=function(t){var r=this.out;r!==ot&&r._e(t)},e.prototype._c=function(){var t=this.out;t!==ot&&t._c()},e.prototype.up=function(t,r){var n=this.vals[r];this.Nn>0&&n===ot&&this.Nn--,this.vals[r]=t},e.prototype.down=function(t,r){this.others[t]._remove(r)},e}();_t.SampleCombineOperator=Tn;var Mn;Mn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return function(o){return new Xa.Stream(new Tn(o,t))}};_t.default=Mn;const Za=window&&window.WS||"ws://localhost:8080",Qa=["join","emit"],tu=window.io;function eu(e=Za){console.log("Socket Server:",e);const t=tu(e);return window.SOCKET=t,t.on("error",r=>{console.log("Socket error:",r)}),function(n){const o=P.create({start:i=>{t.onAny((a,...u)=>i.next({event:a,data:u})),t.on("connect",()=>i.next({event:"connect"})),t.on("disconnect",()=>i.next({event:"disconnect"})),t.on("error",a=>i.next({event:"error",data:a}))},stop:()=>{t.close()}});return n.subscribe({next:i=>{let a,u;if(typeof i.join=="string"&&(a="join",u=i.join),typeof i.type=="string"?(a=i.type,u=i.data):(a="emit",u=i),!Qa.includes(a))throw new Error("Unsupported Socket.io command:",a);t[a](u)},complete:()=>{},error:()=>{}}),{select:i=>{const a=o.filter(u=>u.event==i);return H.adapt(a)}}}}var Ae,Tr;function ru(){if(Tr)return Ae;Tr=1;var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,o=function(f){return typeof Array.isArray=="function"?Array.isArray(f):t.call(f)==="[object Array]"},i=function(f){if(!f||t.call(f)!=="[object Object]")return!1;var d=e.call(f,"constructor"),m=f.constructor&&f.constructor.prototype&&e.call(f.constructor.prototype,"isPrototypeOf");if(f.constructor&&!d&&!m)return!1;var _;for(_ in f);return typeof _>"u"||e.call(f,_)},a=function(f,d){r&&d.name==="__proto__"?r(f,d.name,{enumerable:!0,configurable:!0,value:d.newValue,writable:!0}):f[d.name]=d.newValue},u=function(f,d){if(d==="__proto__")if(e.call(f,d)){if(n)return n(f,d).value}else return;return f[d]};return Ae=function c(){var f,d,m,_,y,h,v=arguments[0],g=1,b=arguments.length,C=!1;for(typeof v=="boolean"&&(C=v,v=arguments[1]||{},g=2),(v==null||typeof v!="object"&&typeof v!="function")&&(v={});g<b;++g)if(f=arguments[g],f!=null)for(d in f)m=u(v,d),_=u(f,d),v!==_&&(C&&_&&(i(_)||(y=o(_)))?(y?(y=!1,h=m&&o(m)?m:[]):h=m&&i(m)?m:{},a(v,{name:d,newValue:c(C,h,_)})):typeof _<"u"&&a(v,{name:d,newValue:_}));return v},Ae}var nu=ru();const Ln=gt(nu),ou=e=>e===void 0,iu=e=>typeof e=="number",su=e=>typeof e=="string",jn=e=>su(e)||iu(e),au=e=>Array.isArray(e),uu=e=>typeof e=="object"&&e!==null,cu=e=>typeof e=="function",fu=e=>uu(e)&&"sel"in e&&"data"in e&&"children"in e&&"text"in e,lu={svg:1,circle:1,ellipse:1,line:1,polygon:1,polyline:1,rect:1,g:1,path:1,text:1},pu=e=>e.sel in lu,xe=(...e)=>Ln(!0,...e),hu=(...e)=>Ln(!1,...e),Fn=(e,t,r)=>{let n=r;for(let o=0;o<e.length;o++){const i=e[o];au(i)?n=Fn(i,t,n):n=t(n,i)}return n},Fe=(e,t)=>Object.keys(e).map(r=>t(r,e[r])).reduce((r,n)=>xe(r,n),{}),du=(e,t)=>Fe(e,(r,n)=>{const o=r.indexOf("-");if(o>-1&&t[r.slice(0,o)]!==void 0){const i={[r.slice(o+1)]:n};return{[r.slice(0,o)]:i}}return{[r]:n}}),Mr=(e,t)=>Fe(t,(r,n)=>r!==e?{[r]:n}:{}),Ie=e=>jn(e)?{text:e,sel:void 0,data:void 0,children:void 0,elm:void 0,key:void 0}:void 0,zt=e=>pu(e)?hu(e,{data:Mr("props",xe(e.data,{ns:"http://www.w3.org/2000/svg",attrs:Mr("className",xe(e.data.props,{class:e.data.props?e.data.props.className:void 0}))}))},{children:ou(e.children)?void 0:e.children.map(t=>zt(t))}):e,at={for:"attrs",role:"attrs",tabindex:"attrs","aria-*":"attrs",key:null},yu=(e,t)=>Fe(e,(r,n)=>{const o={[r]:n};if(at[r]&&t[at[r]]!==void 0)return{[at[r]]:o};if(at[r]===null)return{};const i=Object.keys(at);for(let a=0;a<i.length;a++){const u=i[a];if(u.charAt(u.length-1)==="*"&&r.indexOf(u.slice(0,-1))===0&&t[at[u]]!==void 0)return{[at[u]]:o}}return t[r]!==void 0?{[t[r]?t[r]:r]:n}:{props:o}}),Lr=(e,t)=>zt(yu(du(e,t),t)),jr=e=>e.length>1||!jn(e[0])?void 0:e[0].toString(),Fr=e=>Fn(e,(t,r)=>{const n=fu(r)?r:Ie(r);return t.push(n),t},[]),mu={attrs:"",props:"",class:"",data:"dataset",style:"",hook:"",on:""},vu=e=>(t,r,...n)=>{if(typeof t>"u"&&(t="UNDEFINED",console.error("JSX Error: Capitalized HTML element without corresponding factory function.  Components with names where the first letter is capital MUST be defined or included at the parent component's file scope.")),cu(t)){if(t.name==="Fragment")return t(r||{},n);if(r||(r={}),t.isSygnalComponent){const i=t;t=t.componentName||t.label||t.name||"sygnal-factory",r.sygnalFactory=i}else{const i=t.componentName||t.label||t.name||"FUNCTION_COMPONENT",a=t,{model:u,intent:c,hmrActions:f,context:d,peers:m,components:_,initialState:y,calculated:h,storeCalculatedInState:v,DOMSourceName:g,stateSourceName:b,debug:C,preventInstantiation:O}=t;if(O){const $=jr(n);return zt({sel:i,data:r?Lr(r,e):{},children:typeof $<"u"?Ie($):Fr(n),text:$,elm:void 0,key:r?r.key:void 0})}const w={name:i,view:a,model:u,intent:c,hmrActions:f,context:d,peers:m,components:_,initialState:y,calculated:h,storeCalculatedInState:v,DOMSourceName:g,stateSourceName:b,debug:C};r.sygnalOptions=w,t=i}}const o=jr(n);return zt({sel:t,data:r?Lr(r,e):{},children:typeof o<"u"?Ie(o):Fr(n),text:o,elm:void 0,key:r?r.key:void 0})},De=vu(mu),_u=(e,t)=>{const{team:r,success:n,error:o}=t,i=n?"Success":o||"waiting...",a=Ua("panel",{success:n,error:o});return De("div",{className:a},r," : ",i)},Yt=(e,t)=>De("div",{className:"main"},De("collection",{of:_u,from:"teams",className:"panels"}));Yt.initialState={teams:[{team:"team1",success:void 0,error:void 0},{team:"team2",success:void 0,error:void 0},{team:"team3",success:void 0,error:void 0},{team:"team4",success:void 0,error:void 0},{team:"team5",success:void 0,error:void 0},{team:"team6",success:void 0,error:void 0},{team:"team7",success:void 0,error:void 0},{team:"team8",success:void 0,error:void 0},{team:"team9",success:void 0,error:void 0},{team:"team10",success:void 0,error:void 0}],errorsWithoutTeam:[]};Yt.model={API_HIT:(e,t)=>{console.log("HIT",t,e);const r=e.teams,{team:n,success:o,error:i}=t.data[0],a=r.map(u=>u.team==n?{team:n,success:o,error:i}:u);return{...e,teams:a}}};Yt.intent=({DOM:e,SOCKET:t})=>({API_HIT:t.select("apiCall")});const gu=`ws://${window.location.host}`,bu={SOCKET:eu(gu)},{hmr:wu}=Pn(Yt,bu);
